<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Spring5 | SK370 博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  
    <meta name="keywords" content="SK370, JAVA, 博客">
  
  
    <link rel="alternate" href="/atom.xml" title="SK370 博客" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
    
<link rel="stylesheet" href="/localshare/css/share.css">

  
  
  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">SK370 博客</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">SK370的个人博客</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/."><i class="fa fa-home"></i> 首页</a>
        
          <a class="main-nav-link" href="/archives/"><i class="fa fa-archive"></i> 归档</a>
        
          <a class="main-nav-link" href="/about/"><i class="fa fa-user"></i> 关于</a>
        
      </nav>
    </div>
    <div id="search-form">
      <div id="result-mask" class="hide"></div>
      <label><input id="search-key" type="text" autocomplete="off" placeholder="搜索"></label>
      <div id="result-wrap" class="hide">
        <div id="search-result"></div>
      </div>
      <div class="hide">
        <template id="search-tpl">
          <div class="item">
            <a href="/{path}" title="{title}">
              <div class="title">{title}</div>
              <div class="time">{date}</div>
              <div class="tags">{tags}</div>
            </a>
          </div>
        </template>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-spring5/Spring5" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      Spring5
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2022-07-12T00:09:46.000Z" itemprop="datePublished">2022年07月12日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/Spring-Framework/">Spring Framework</a>
  </div>

      
        <span class="article-views">
  <i class="fa fa-views"></i>
  <i id="busuanzi_container_page_pv">
      <i id="busuanzi_value_page_pv"></i>
  </i>
</span>

      
      
<a href="/2022/07/12/spring5/Spring5/#comments" class="article-comment-link">
  
    
    
    
    
    
  
  <i class="fa fa-commt"></i>
  留言
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><em>Spring 是轻量级的开源 JavaEE 框架，具有高效、简洁开发的特点，用于解决企业应用开发的复杂性。</em></p>
<span id="more"></span>
<h2 id="1-spring-概述"><a class="markdownIt-Anchor" href="#1-spring-概述"></a> 1. Spring 概述</h2>
<h3 id="11-spring-框架介绍"><a class="markdownIt-Anchor" href="#11-spring-框架介绍"></a> 1.1 Spring 框架介绍</h3>
<h4 id="111-基本介绍"><a class="markdownIt-Anchor" href="#111-基本介绍"></a> 1.1.1 基本介绍</h4>
<ol>
<li>是什么：Spring 是轻量级的开源 JavaEE 框架
<ul>
<li>框架：高效、简洁开发</li>
</ul>
</li>
<li>作用：解决企业应用开发的复杂性</li>
<li>核心：IoC 和 Aop
<ul>
<li>IoC：控制反转，把创建对象过程交给 Spring 进行管理</li>
<li>Aop：面向切面，不修改源代码进行功能增强</li>
</ul>
</li>
<li>特点：
<ul>
<li>方便解耦，简化开发</li>
<li>Aop 编程支持</li>
<li>方便程序测试</li>
<li>方便和其他框架进行整合</li>
<li>方便进行事务操作</li>
<li>降低 API 开发难度</li>
</ul>
</li>
</ol>
<h4 id="112-框架结构图"><a class="markdownIt-Anchor" href="#112-框架结构图"></a> 1.1.2 框架结构图</h4>
<p>4.x 版本<br>
<img src="/2022/07/12/spring5/Spring5/jvme0c60b4606711fc4a0b6faf03230247a.png" alt><br>
spring5<br>
<img src="/2022/07/12/spring5/Spring5/20200831175708.png" alt></p>
<h3 id="12-spring52-下载"><a class="markdownIt-Anchor" href="#12-spring52-下载"></a> 1.2 Spring5.2 下载</h3>
<h4 id="121-手动下载引入-idea"><a class="markdownIt-Anchor" href="#121-手动下载引入-idea"></a> 1.2.1 手动下载，引入 IDEA</h4>
<ol>
<li>下载地址：
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image.png" alt="image.png"></li>
<li>确认版本：
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759523974.png" alt="image.png"></li>
</ul>
</li>
<li>前往下载页面：
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759525428.png" alt="image.png"></li>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759526918.png" alt="image.png">第一个框中的为最新版本，第二个框中的为历史版本</li>
</ul>
</li>
<li>下载源码：
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759529849.png" alt="image.png"></li>
</ul>
</li>
<li>下载后找个位置存放即可。</li>
</ul>
</li>
<li>IDEA 中创建普通 Java 工程【不同版本 IDEA 的步骤不同】
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759531241.png" alt="image.png"></li>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759532361.png" alt="image.png"></li>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759533807.png" alt="image.png"></li>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759535201.png" alt="image.png">
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759536964.png" alt="image.png"></li>
<li>文件结构说明：通过本地文件存储结构，可以看到项目名称【1】spring 只是一个虚拟的文件管理路径，模块【3】spring5 是真实的文件路径。同时由于项目名称和模块名称不一致，所以 IDEA 自动创建了模块的本地存放路径【4】，【2】的直接子路径下也没有 src 目录。即如果采取【1】【3】同名的方式，则不会创建【4】路径，而是【4】=【2】，同时【2】的直接子路径下也会生成 src 目录。——原因为 IDEA 工具的项目、模块关系设计决定。</li>
</ul>
</li>
</ul>
</li>
<li>导入 jar 包作为 lib 库
<ul>
<li>spring5 下新建 libs 文件夹，作为本模块的依赖库
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759540607.png" alt="image.png"></li>
</ul>
</li>
<li>将 spring5 的核心 jar 包拷贝至 libs 目录
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759542194.png" alt="image.png"></li>
<li>这里还引入了<code>commons-logging.jar</code>，这是一个 apache 的一个日志文件，spring5 需要这个文件，下载引入即可。下载地址：</li>
</ul>
</li>
<li>将 jar 包作为【模块】依赖库——也可以作为项目依赖库，看具体需求
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759543570.png" alt="image.png"></li>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759548523.png" alt="image.png"></li>
<li>注意：这样添加的 5 个包会用一个名字。单独一个一个添加可以创建 5 个名字。</li>
</ul>
</li>
</ul>
</li>
</ol>
<h4 id="122-基于-maven-构建"><a class="markdownIt-Anchor" href="#122-基于-maven-构建"></a> 1.2.2 基于 maven 构建</h4>
<p><img src="/2022/07/12/spring5/Spring5/image-1669759550088.png" alt="image.png"><br>
<img src="/2022/07/12/spring5/Spring5/image-1669759552239.png" alt="image.png"><br>
引入依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>iceriver.spring<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-structre<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        必须引入--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.22<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        按需引入juint--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2022/07/12/spring5/Spring5/image-1669759556115.png" alt="image.png"><br>
基于配置文件时，配置文件写在 resources 路径下，名称任意。</p>
<h3 id="13-体验-spring-创建对象"><a class="markdownIt-Anchor" href="#13-体验-spring-创建对象"></a> 1.3 体验 spring 创建对象</h3>
<h4 id="131-使用配置文件方式"><a class="markdownIt-Anchor" href="#131-使用配置文件方式"></a> 1.3.1 使用配置文件方式</h4>
<ol>
<li>编写类及方法【任意】。
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759559736.png" alt="image.png"></li>
</ul>
</li>
<li>创建配置文件（位置选择 src 目录，名字任意）：
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759557946.png" alt="image.png"></li>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759562862.png" alt="image.png">
<ul>
<li>这个 id 不是要创建的对象名字，而是通过这个 id 可以找到对应的类，相当于属性名。</li>
</ul>
</li>
</ul>
</li>
<li>创建 javabean：</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> iceriver.spring;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: INFINITY https://developer.aliyun.com/profile/sagwrxp2ua66w</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022/7/12 8:52</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(String name, String password)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">say</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;lalalla&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPassword</span><span class="params">(String password)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, password=&#x27;&quot;</span> + password + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>创建 User 对象</li>
<li></li>
</ol>
<h2 id="2-ioc-及-ioc-操作"><a class="markdownIt-Anchor" href="#2-ioc-及-ioc-操作"></a> 2. IoC 及 IoC 操作</h2>
<h3 id="21-ioc-简述"><a class="markdownIt-Anchor" href="#21-ioc-简述"></a> 2.1 IoC 简述</h3>
<h4 id="211-ioc-概念"><a class="markdownIt-Anchor" href="#211-ioc-概念"></a> 2.1.1 IoC 概念</h4>
<ol>
<li>含义：控制反转</li>
<li>作用：把对象创建和对象之间的调用过程，交给 Spring 进行管理</li>
<li>目的：降低耦合度</li>
<li>底层：xml 解析、工厂模式、反射</li>
</ol>
<h4 id="222-底层原理"><a class="markdownIt-Anchor" href="#222-底层原理"></a> 2.2.2 底层原理</h4>
<ol>
<li>在 xml 文件中配置类的路径 classPath</li>
<li>使用类工厂创建对象
<ul>
<li>解析 xml，读取 classPath</li>
<li>使用 classPath，利用反射机制<code>Class.forName(classPath)</code>获取类的对象</li>
<li>使用<code>newInstance()</code>实例化对象</li>
</ul>
</li>
</ol>
<p><img src="/2022/07/12/spring5/Spring5/frc-365faceb5697f04f31399937c059c162.png" alt></p>
<h4 id="223-ioc-接口"><a class="markdownIt-Anchor" href="#223-ioc-接口"></a> 2.2.3 IoC 接口</h4>
<ol>
<li>
<p>IoC 思想基于 IoC 容器，该容器的底层就是对象工厂</p>
<ul>
<li>容器：为某种特定组件的运行提供必要支持的软件环境</li>
<li>IoC 容器：管理所有轻量级的 JavaBean 组件，提供生命周期管理、配置和组装服务、AOP 支持、建立在 AOP 基础上的声明式事务等。</li>
</ul>
</li>
<li>
<p>IoC 容器的实现方式（接口）</p>
<ul>
<li><code>BeanFactory</code>接口：IOC 的基本实现，Spring 内部使用，不建议开发人员使用
<ul>
<li>加载配置文件时不会创建，获取对象时才去创建</li>
</ul>
</li>
<li><code>AplicationContext</code>接口：<code>BeanFactory</code>的子接口，功能更强大，给开发人员使用
<ul>
<li>加载配置文件时即创建对象</li>
</ul>
</li>
</ul>
</li>
<li>
<p><code>ApplicationContext</code>的两个重要实现类：（取决于使用哪种方式加载 xml 配置文件）</p>
<blockquote>
<ul>
<li>IDEA 中 ctrl+h 打开层次结构图</li>
</ul>
</blockquote>
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759567938.png" alt="image.png"></li>
<li><code>ClassPathXmApplicationContext</code></li>
<li><code>FileSystemXmlApplicationContext</code></li>
<li>基于注解的开发使用<code>AnnotationConfigApplicationContext</code></li>
</ul>
</li>
<li>
<p><code>BeanFactory</code>：</p>
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759569254.png" alt="image.png"></li>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759571258.png" alt="image.png"></li>
</ul>
</li>
</ol>
<h4 id="224-bean-管理"><a class="markdownIt-Anchor" href="#224-bean-管理"></a> 2.2.4 Bean 管理</h4>
<ol>
<li>Bean 管理指：Spring 创建对象、Spring 注入属性</li>
<li>操作方式：基于 xml 配置文件实现、基于注解方式实现</li>
</ol>
<h3 id="22-基于-xml-操作bean-管理"><a class="markdownIt-Anchor" href="#22-基于-xml-操作bean-管理"></a> 2.2 基于 xml 操作——Bean 管理</h3>
<h4 id="221-创建对象"><a class="markdownIt-Anchor" href="#221-创建对象"></a> 2.2.1 创建对象</h4>
<ol>
<li>xml 文件中：使用<code>&lt;bean&gt;</code>标签，<code>id</code>指定该类的对象名字，<code>class</code>指向类的全路径
<ul>
<li><code>&lt;bean id=&quot;user&quot; class=&quot;iceriver.spring.User&quot;&gt;&lt;/bean&gt;</code></li>
</ul>
</li>
<li>要使用该对象的类中：加载类对象：
<ul>
<li><code>BeanFactory context = new ClassPathXmlApplicationContext(&quot;iceriver.xml&quot;);</code></li>
<li>【建议】<code>ApplicationContext context = new ClassPathXmlApplicationContext(&quot;iceriver.xml&quot;);</code></li>
</ul>
</li>
<li>要使用该对象的类中：创建对象（默认使用类的无参构造器）：
<ul>
<li><code>User user = context.getBean(&quot;user&quot;, User.class);</code></li>
<li>没有无参构造器/无参构造器不可用时会报错。——xml 文件找不到类</li>
</ul>
</li>
</ol>
<h4 id="222-注入属性"><a class="markdownIt-Anchor" href="#222-注入属性"></a> 2.2.2 注入属性</h4>
<ol>
<li><code>DI</code>：依赖注入，即注入属性</li>
<li>方式一：使用属性的 setter
<ul>
<li><strong>【前提】：JavaBean 的类中声明了对应属性的 setter 方法、同时无参构造器可用。</strong></li>
<li>xml 文件中配置<code>&lt;bean&gt;</code>标签的子标签<code>&lt;property&gt;</code>
<ul>
<li><code>name</code>表示给哪个属性赋值</li>
<li><code>value</code>表示该属性的注入的值</li>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759576392.png" alt="image.png"></li>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759930240.png" alt="image.png"></li>
<li><code>name</code>是<code>&lt;poperty&gt;</code>的必需属性，<code>value</code>属性可以作为<code>&lt;property&gt;</code>的子标签设置</li>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759574553.png" alt="image.png"></li>
</ul>
</li>
</ul>
</li>
</ol>
<ul>
<li>方式二：使用带参构造器
<ul>
<li>【前提】：JavaBean 中有对应属性的构造器方法，同时也显式地声明<strong>无参构造器，用于 xml 文件找到对应地类文件。</strong></li>
<li>xml 文件中配置<code>&lt;bean&gt;</code>标签的子标签<code>&lt;constructor-arg&gt;</code>
<ul>
<li><code>name</code>表示给哪个属性赋值；也可以使用索引形式，从 0 开始</li>
<li><code>value</code>表示该属性的注入的值</li>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759579021.png" alt="image.png"></li>
</ul>
</li>
</ul>
</li>
</ul>
<ol start="3">
<li>方式三：p 名称空间注入：对基于 xml 配置文件注入属性的优化
<ul>
<li>配置<code>&lt;beans&gt;</code>标签的 p 名称空间：
<ul>
<li><code>&lt;beans xmlns:p=&quot;http://www.springframework.org/schema/p&quot;&gt;</code></li>
</ul>
</li>
<li>给<code>&lt;bean&gt;</code>标签添加属性：<code>&lt;bean id=&quot;&quot; class=&quot;&quot; p:name1=&quot;&quot; p:name2=&quot;&quot;&gt;</code>
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759580751.png" alt="image.png"></li>
</ul>
</li>
</ul>
</li>
<li>xml 注入其他类型的属性：
<ul>
<li><code>null</code>值：
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759582256.png" alt="image.png"></li>
</ul>
</li>
<li>特殊字符值<code>&gt;、&lt;</code>：
<ul>
<li>使用转义字符：<code>&lt;</code>代表<code>&lt;</code>，<code>&gt;</code>代表<code>&gt;</code></li>
<li>将带<code>&gt;、&lt;</code>的文本写入至<code>CDATA</code>
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759588135.png" alt="image.png"></li>
<li>如果有回车符也会原样输出。</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>注入属性——外部 Bean
<ul>
<li>原始方法：在 service 类中创建 dao 对象，使用 dao 对象调用其方法</li>
<li>注入方式：在 service 类中，把 dao 当作私有化属性，并创建其 setter，在 xml 文件中给 service 类进行注入属性配置。
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759603077.png" alt="image.png"></li>
</ul>
</li>
</ul>
</li>
<li>注入属性——内部 Bean 和级联赋值
<ul>
<li>内部 Bean：一个<code>&lt;bean&gt;</code>中嵌套了另一个<code>&lt;bean&gt;</code>
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759604324.png" alt="image.png"></li>
<li>dept2 是 Dept 的私有属性，dept3 是 Emp 的私有属性。</li>
</ul>
</li>
<li>级联赋值：配置嵌套配置【上面的配置也是一种级联赋值】
<ul>
<li>方式一：<img src="/2022/07/12/spring5/Spring5/image-1669759609331.png" alt="image.png"></li>
<li>方式二：<img src="/2022/07/12/spring5/Spring5/image-1669759606921.png" alt="image.png"></li>
<li>方式二中，要使用<code>dept3.dept2</code>，还得给<code>Emp</code>类中的<code>Dept</code>属性类设置 getter，否则会找不到。这样设置后，注释内容（安保部）会失效。</li>
</ul>
</li>
</ul>
</li>
<li>注入数组、集合类属性：
<ul>
<li>注入数组：
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759613345.png" alt="image.png"></li>
</ul>
</li>
<li>注入 List 集合：
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759615402.png" alt="image.png"></li>
</ul>
</li>
<li>注入 Map 类型集合：
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759617144.png" alt="image.png"></li>
</ul>
</li>
<li>注入 Set 类型集合：
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759618542.png" alt="image.png"></li>
</ul>
</li>
<li>注入指定类型【List】的集合：
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759620144.png" alt="image.png"></li>
</ul>
</li>
<li>注入指定类型【Map】的集合：
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759621858.png" alt="image.png"></li>
</ul>
</li>
<li>提取集合类型的属性注入：
<ul>
<li>配置 util 空间：<img src="/2022/07/12/spring5/Spring5/image-1669759623885.png" alt="image.png"></li>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759625890.png" alt="image.png"></li>
</ul>
</li>
<li>注意事项：注入数组、List 集合、set 集合的配置中，<code>&lt;array&gt;</code>、<code>&lt;list&gt;</code>、<code>&lt;set&gt;</code>三个标签可互换，其中，<code>&lt;set&gt;</code>标签包裹的<code>&lt;value&gt;</code>值如果有重复时，重复项只取一项。</li>
</ul>
</li>
</ol>
<h4 id="223-factorybean"><a class="markdownIt-Anchor" href="#223-factorybean"></a> 2.2.3 FactoryBean</h4>
<ol>
<li>Spring 有两种<code>Bean</code>，一种是普通<code>Bean</code>，另一种是<code>FactoryBean</code>
<ul>
<li>普通<code>Bean</code>：xml 文件中 class 配置的是什么类，创建实例的时候就返回该类型</li>
<li>工厂<code>Bean</code>（<code>FactoryBean</code>）：xml 文件中 class 配置的类型，和创建实例时返回的类型可以不一致。</li>
</ul>
</li>
<li><code>FactoryBean</code>的使用：
<ul>
<li>创建普通 Bean 时，让其实现<code>FactoryBean</code>接口。</li>
<li><code>FactoryBean</code>使用泛型，指定需要创建实例时，返回的类型。</li>
<li>在实现<code>FactoryBean</code>的<code>getObject()</code>方法中，将返回值类型指定为传入的泛型类
<ul>
<li><code>getObject()</code>：通过一个对象交给 ioc 容器管理</li>
<li><code>getObjectType()</code>：设置所提供对象的类型</li>
<li><code>isSingleton()</code>：所提供的对象是否单例</li>
</ul>
</li>
<li>此时得到的类型不再是实现<code>FactoryBean</code>接口的类的类型，而是传给<code>FactoryBean</code>接口范型的类型（即<code>FactoryBean</code>方法返回的类型。获取实现<code>FactoryBean</code>接口的类对象会出错。</li>
</ul>
</li>
</ol>
<h4 id="224-bean-作用域"><a class="markdownIt-Anchor" href="#224-bean-作用域"></a> 2.2.4 Bean 作用域</h4>
<ol>
<li>Spring 中，默认情况下，创建的 Bean 实例默认是单实例——内存中只有一个实例对象</li>
<li>设置多实例：
<ul>
<li><code>&lt;bean&gt;</code>标签设置<code>scope</code>属性
<ul>
<li><code>singleton</code>：单实例，默认值，加载 xml 配置文件时，即创建对象</li>
<li><code>prototype</code>：多实例，调用<code>getBean()</code>时创建多实例对象</li>
<li><code>request</code>：每次 HTTP 请求时创建实例</li>
<li><code>session</code>：每个会话中创建实例</li>
</ul>
</li>
</ul>
</li>
</ol>
<h4 id="225-bean-生命周期共-7-步"><a class="markdownIt-Anchor" href="#225-bean-生命周期共-7-步"></a> 2.2.5 Bean 生命周期（共 7 步）</h4>
<ol>
<li>通过构造器创建 bean 实例（无参数构造）
<ul>
<li>读取配置文件，创建 Class 类对象</li>
</ul>
</li>
<li>为 bean 的属性设置值和对其他 bean 引用（调用 set 方法）
<ul>
<li>读取配置文件，创建 Class 类对象</li>
</ul>
</li>
<li>把 bean 实例传递 bean 前置处理器的方法 <code>postProcess**Before**Initialization()</code>
<ul>
<li>要求类实现<code>BeanPostProcessor</code>接口</li>
<li>实现<code>BeanPostProcessor</code>接口的类的配置，会导致本配置文件中的所有类都添加后置处理器</li>
</ul>
</li>
<li>调用 bean 的初始化的方法（需要进行配置初始化的方法）
<ul>
<li><code>&lt;bean&gt;</code>须配置属性<code>init-method = &quot;initMethod()&quot;</code>——方法名任意</li>
</ul>
</li>
<li>把 bean 实例传递 bean 后置处理器的方法 <code>postProcess**After**Initialization()</code></li>
<li>bean 可以使用了（对象获取到了）
<ul>
<li>通过 Class 对象创建实例对象完毕。</li>
</ul>
</li>
<li>当容器关闭时候，调用 bean 的销毁的方法（需要进行配置销毁的方法）
<ul>
<li><code>&lt;bean&gt;</code>须配置属性<code>destory-method = &quot;destoryMethod()&quot;</code>——方法名任意</li>
<li>类中显式调用<code>context.close()</code>——<code>context</code>是根据 xml 文件获得的 Class 类对象</li>
</ul>
</li>
</ol>
<h4 id="226-xml-自动装配"><a class="markdownIt-Anchor" href="#226-xml-自动装配"></a> 2.2.6 xml 自动装配</h4>
<ol>
<li>根据指定的装配规则（属性名称或属性类型），Spring 自动将匹配的属性值进行注入</li>
<li><code>&lt;bean&gt;</code>标签配置<code>autowrite</code>属性
<ul>
<li><code>byName</code>：根据属性名注入，要求外部 bean 的 id 值，和要注入的类中的属性名称一样</li>
<li><code>byType</code>：根据属性类型注入。</li>
</ul>
</li>
</ol>
<h4 id="227-配置文件装配数据源"><a class="markdownIt-Anchor" href="#227-配置文件装配数据源"></a> 2.2.7 配置文件装配数据源</h4>
<ol>
<li>xml 文件直接配置 Druid 连接池：
<ul>
<li>添加 druid 连接池 jar 包</li>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759644458.png" alt="image.png"></li>
</ul>
</li>
<li>xml 读取配置文件进行配置 Druid 连接池
<ul>
<li>新建配置文件<code>jdbc.properties</code>
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759642351.png" alt="image.png"></li>
</ul>
</li>
<li>引入名称空间：
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759640540.png" alt="image.png"></li>
</ul>
</li>
<li>引入配置文件
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759638489.png" alt="image.png"></li>
</ul>
</li>
<li>使用表达式：
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759635721.png" alt="image.png"></li>
<li><code>&#123;&#125;</code>中的值要与<code>.properties</code>配置文件中的名称一致。</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="23-基于注解操作bean-管理"><a class="markdownIt-Anchor" href="#23-基于注解操作bean-管理"></a> 2.3 基于注解操作——Bean 管理</h3>
<h4 id="231-spring-中-bean-管理的注解"><a class="markdownIt-Anchor" href="#231-spring-中-bean-管理的注解"></a> 2.3.1 Spring 中 Bean 管理的注解</h4>
<ol>
<li><code>@Component</code></li>
<li><code>@Service</code></li>
<li><code>@Controller</code></li>
<li><code>@Repostory</code></li>
</ol>
<ul>
<li>注意：上述四个注解作用一致，只是针对不同 JavaBean 进行语义化使用</li>
</ul>
<h4 id="232-基于注解创建对象"><a class="markdownIt-Anchor" href="#232-基于注解创建对象"></a> 2.3.2 基于注解创建对象</h4>
<ol>
<li>引入依赖<code>spring-aop-5.2.6.RELEASE</code></li>
<li>引入名称空间：
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759669521.png" alt="image.png"></li>
</ul>
</li>
<li>开启组件扫描：
<ul>
<li>方式一：逗号分隔多个包
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759667594.png" alt="image.png"></li>
</ul>
</li>
<li>方式二：扫描上级包
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759665405.png" alt="image.png"></li>
</ul>
</li>
</ul>
</li>
<li>配置注解：
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759663143.png" alt="image.png"></li>
</ul>
</li>
<li>组件扫描配置
<ul>
<li>设置扫描指定注解为<code>Controller</code>的类
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759656213.png" alt="image.png"></li>
</ul>
</li>
<li>设置不扫描指定注解为<code>Controller</code>的类
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759653185.png" alt="image.png"></li>
</ul>
</li>
</ul>
</li>
</ol>
<h4 id="233-属性注入"><a class="markdownIt-Anchor" href="#233-属性注入"></a> 2.3.3 属性注入</h4>
<ol>
<li><code>@Autowried</code>：根据属性类型自动装配
<ul>
<li>在要注入的属性声明上面，添加<code>@Autowired</code></li>
<li>该属性的 setter 不是必须</li>
</ul>
</li>
<li><code>@Qualifier</code>：根据属性名进行注入，需要配合<code>@Autowired</code>使用
<ul>
<li>适用于<code>@Autowried</code>查找到多个实现类的情况</li>
<li>给被注入的类指定<code>value</code>值
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759965921.png" alt="image.png"></li>
</ul>
</li>
<li>在要注入的属性声明上面，添加<code>@Autowired</code>和<code>@Qualifier</code>，给<code>@Qualifier</code>配置<code>value</code>值
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759968018.png" alt="image.png"></li>
</ul>
</li>
</ul>
</li>
<li><code>@Resource</code>：可以根据类型注入，也可以根据名称注入
<ul>
<li>在要注入的属性声明上面，添加<code>@Resource</code>——根据类型注入
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759970068.png" alt="image.png"></li>
</ul>
</li>
<li>在要注入的属性声明上面，添加<code>@Resource</code>，并配置<code>name</code>属性值——根据类型注入
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759972039.png" alt="image.png"></li>
<li><code>@Resource</code>来源于<code>import javax.annotation.Resource;</code>，所以官方不推荐使用这个。</li>
</ul>
</li>
</ul>
</li>
<li><code>@Value</code>：给普通属性注入值
<ul>
<li>在要注入的属性声明上面，添加<code>@Value</code></li>
<li>使用<code>value</code>属性设置值
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759973803.png" alt="image.png"></li>
</ul>
</li>
</ul>
</li>
</ol>
<h4 id="234-完全注解开发"><a class="markdownIt-Anchor" href="#234-完全注解开发"></a> 2.3.4 完全注解开发</h4>
<ol>
<li>创建配置类，替代 xml 配置文件
<ul>
<li>类的名称任意</li>
<li>使用<code>@Configuration</code>声明这是一个配置类</li>
<li>使用<code>@ComponentScan(basePackages = &#123;&quot;iceriver.spring&quot;&#125;)</code>指定扫描的基本路径</li>
</ul>
</li>
<li>使用<code>AnnotationConfigApplicationContext</code>加载配置类
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759682367.png" alt="image.png"></li>
</ul>
</li>
</ol>
<h2 id="3-aop"><a class="markdownIt-Anchor" href="#3-aop"></a> 3. Aop</h2>
<h3 id="31-aop-介绍"><a class="markdownIt-Anchor" href="#31-aop-介绍"></a> 3.1 Aop 介绍</h3>
<h4 id="311-aop-概念"><a class="markdownIt-Anchor" href="#311-aop-概念"></a> 3.1.1 Aop 概念</h4>
<ol>
<li><code>Aspect Oriented Programming</code>的缩写，意为面向切面编程。</li>
<li>是一种通过预编译和运行期间动态代理实现程序功能统一维护的一种技术。</li>
<li>Aop 是 OOP 的延续，也是函数式编程的一种衍生泛型。</li>
<li>Aop 可以对业务逻辑的各个部分进行隔离，使业务逻辑各部分之间的耦合度降低，提高程序的可重用性，提高开发的效率。
<ul>
<li>不修改源代码的情况下，在主干功能里面添加新功能。</li>
</ul>
</li>
</ol>
<h4 id="312-aop-底层原理"><a class="markdownIt-Anchor" href="#312-aop-底层原理"></a> 3.1.2 Aop 底层原理</h4>
<ol>
<li>底层使用了动态代理进行实现，有接口情况下，使用 JDK 实现动态代理；没有接口情况下，通过 CGLIB 动态代理。
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759688829.png" alt="image.png"></li>
</ul>
</li>
<li>JDK 实现动态代理：创建接口实现类的代理对象，增强类的方法。
<ul>
<li>通过<code>java.lang.reflect.Proxy</code>中的<code>newProxyInstance(ClassLoader loader,Class&lt;?&gt;[] interfaces,InvocationHandler h)</code>
<ul>
<li>loader - 定义代理类的类加载器</li>
<li>interfaces - 代理类要实现的接口列表</li>
<li>h - 指派方法调用的调用处理程序：可以使用匿名内部类，也可以创建要被代理的类的实现类。</li>
</ul>
</li>
</ul>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> iceriver.spring.jdk;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationHandler;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Proxy;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: INFINITY https://developer.aliyun.com/profile/sagwrxp2ua66w</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022/7/16 7:58</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDKProxy</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Class[] interfaces = &#123;UserDao.class&#125;;</span><br><span class="line"><span class="comment">//        1. 方式一：第三个参数使用匿名内部类</span></span><br><span class="line"><span class="comment">//        Proxy.newProxyInstance(JDKProxy.class.getClassLoader(), interfaces, new InvocationHandler() &#123;</span></span><br><span class="line"><span class="comment">//            @Override</span></span><br><span class="line"><span class="comment">//            public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123;</span></span><br><span class="line"><span class="comment">//                return null;</span></span><br><span class="line"><span class="comment">//            &#125;</span></span><br><span class="line"><span class="comment">//        &#125;);</span></span><br><span class="line"><span class="comment">//      2. 方式二：第三个参数使用代理类</span></span><br><span class="line">        <span class="type">UserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserDaoImpl</span>();</span><br><span class="line">        <span class="type">UserDao</span> <span class="variable">dao</span> <span class="operator">=</span> (UserDao) Proxy.newProxyInstance(JDKProxy.class.getClassLoader(), interfaces, <span class="keyword">new</span> <span class="title class_">UserDaoProxy</span>(userDao));</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> dao.add(<span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line">        System.out.println(result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 创建代理对象</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserDaoProxy</span> <span class="keyword">implements</span> <span class="title class_">InvocationHandler</span>&#123;</span><br><span class="line"><span class="comment">//    增强原始类功能的代码</span></span><br><span class="line">    <span class="keyword">private</span> Object obj;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">UserDaoProxy</span><span class="params">(Object obj)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.obj = obj;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;方法之前执行……&quot;</span> + method.getName() + <span class="string">&quot;，传递的参数：&quot;</span> + Arrays.toString(args));</span><br><span class="line"></span><br><span class="line">        <span class="type">Object</span> <span class="variable">res</span> <span class="operator">=</span> method.invoke(obj, args);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;方法之后执行&quot;</span> + obj);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>CGLIB 实现动态代理：创建当前类的子类代理对象，增强类的方法。</li>
</ol>
<p><img src="/2022/07/12/spring5/Spring5/image-1669759692424.png" alt="image.png"></p>
<h4 id="313-aop-术语"><a class="markdownIt-Anchor" href="#313-aop-术语"></a> 3.1.3 Aop 术语</h4>
<ol>
<li><code>Joinpoint</code>(连接点)：类中可以被增强的方法。</li>
<li><code>Pointcut</code>(切入点)：实际真正被增强的方法。</li>
<li><code>Advice</code>(通知/增强)：实际增强的逻辑部分。
<ul>
<li>前置通知：<code>@Before</code>注解，被代理类的方法【切入点】执行之前执行</li>
<li>后置通知：<code>@AfterReturning</code>注解，返回结果后执行，后于最终通知</li>
<li>异常通知：<code>@AfterThrowing</code>注解，有异常才执行</li>
<li>最终通知：<code>@After</code>注解，即使有异常也执行</li>
<li>环绕通知：<code>@Arround</code>注解，被代理类的方法【切入点】执行之前、之后都执行</li>
<li>顺序：
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759695832.png" alt="image.png">【无异常】</li>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759697390.png" alt="image.png">【有异常】</li>
</ul>
</li>
</ul>
</li>
<li><code>Aspect</code>(切面)：把<strong>通知</strong>应用到<strong>切入点</strong>的过程。</li>
<li><code>Target</code>(目标对象)：代理的目标对象(要增强的类)</li>
<li><code>Weaving</code>(织入)：把切面应用到目标对象来创建新的代理对象的过程。Spring 采用动态代理织入，而 AspectJ 采用编译期织入和类装载期织入。</li>
<li><code>Proxy(</code>代理)：一个类被 AOP 织入增强后，就产生一个结果代理类。</li>
<li><code>Introduction</code>(引介)：引介是一种特殊的通知在不修改类代码的前提下，Introduction 可以在运行期为类动态地添加一些方法或 Field。</li>
</ol>
<h3 id="32-aop-操作"><a class="markdownIt-Anchor" href="#32-aop-操作"></a> 3.2 Aop 操作</h3>
<h4 id="321-操作方式"><a class="markdownIt-Anchor" href="#321-操作方式"></a> 3.2.1 操作方式</h4>
<ol>
<li>Spring 框架一般都是基于 AspectJ 实现 Aop 操作
<ul>
<li>AspectJ 是独立的 Aop 框架，与 Spring 框架配合使用。</li>
</ul>
</li>
<li>前置准备：
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759698965.png" alt="image.png"></li>
</ul>
</li>
<li>切入点表达式；
<ul>
<li>作用：直到对哪个类的方法进行增强</li>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759700710.png" alt="image.png"></li>
<li>语法结构：<code>excution([权限修饰符][返回类型][类的全路径][方法名称][参数列表])</code>
<ul>
<li>权限修饰符可以用<code>*</code>代替，表示任意类型修饰符</li>
<li>返回类型可以省略</li>
<li>对指定方法进行增强：<code>excution(* iceriver.spring.aop.User.add(..))</code></li>
<li>对类中所有方法进行增强：<code>excution(* iceriver.spring.aop.User.*(..))</code></li>
<li>对包下所有类、所有方法增强：<code>excution(* iceriver.spring.aop.*.*(..))</code></li>
</ul>
</li>
</ul>
</li>
</ol>
<h4 id="322-基于注解进行-aop-操作aspectj-注解"><a class="markdownIt-Anchor" href="#322-基于注解进行-aop-操作aspectj-注解"></a> 3.2.2 基于注解进行 Aop 操作——（AspectJ 注解）</h4>
<ol>
<li>创建被增强【被代理】类，在类中定义方法</li>
<li>创建增强【代理】类，编写增强逻辑</li>
<li>进行通知配置：
<ul>
<li>xml 文件中，开启注解扫描：
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759704402.png" alt="image.png"></li>
</ul>
</li>
<li>使用注解创建代理类和被代理类的对象【2.3.2】
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759709306.png" alt="image.png"></li>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759707160.png" alt="image.png"></li>
</ul>
</li>
<li>代理类添加<code>@Aspect</code>注解，生成代理对象
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759711205.png" alt="image.png"></li>
</ul>
</li>
<li>xml 文件中，开启 Aspect 生成代理对象
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759713046.png" alt="image.png"></li>
</ul>
</li>
</ul>
</li>
<li>配置不同类型的通知：
<ul>
<li>在代理类中，根据不同的通知类型使用对应的注解，并用切入点表达式进行配置</li>
</ul>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> iceriver.spring.annotation;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.ProceedingJoinPoint;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: INFINITY https://developer.aliyun.com/profile/sagwrxp2ua66w</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022/7/16 14:15</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserProxy</span> &#123;</span><br><span class="line">    <span class="meta">@Before(value = &quot;execution(* iceriver.spring.annotation.User.add(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span>&#123;<span class="comment">//前置通知</span></span><br><span class="line">        System.out.println(<span class="string">&quot;before&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@AfterReturning(value = &quot;execution(* iceriver.spring.annotation.User.add(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterReturning</span><span class="params">()</span>&#123;<span class="comment">//后置通知</span></span><br><span class="line">        System.out.println(<span class="string">&quot;afterReturning&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@After(value = &quot;execution(* iceriver.spring.annotation.User.add(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span>&#123;<span class="comment">//最终通知</span></span><br><span class="line">        System.out.println(<span class="string">&quot;after&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@AfterThrowing(value = &quot;execution(* iceriver.spring.annotation.User.add(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterThrowing</span><span class="params">()</span>&#123;<span class="comment">//异常通知</span></span><br><span class="line">        System.out.println(<span class="string">&quot;afterThrowing&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Around(value = &quot;execution(* iceriver.spring.annotation.User.add(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">around</span><span class="params">(ProceedingJoinPoint proceedingJoinPoint)</span> <span class="keyword">throws</span> Throwable &#123;<span class="comment">//环绕通知</span></span><br><span class="line">        System.out.println(<span class="string">&quot;around之前&quot;</span>);</span><br><span class="line">        proceedingJoinPoint.proceed();<span class="comment">//被增强的方法执行，如果不写这句，则被代理的类中的方法、以及前置通知不会被执行</span></span><br><span class="line">        System.out.println(<span class="string">&quot;around之后&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759723342.png" alt="image.png"></li>
</ul>
<ol start="5">
<li>重用切入点的定义：将不同通知类型的配置中，相同的切入点表达式进行抽取
<ul>
<li>定义方法【方法名任意】，抽取相同切入点
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759721012.png" alt="image.png"></li>
</ul>
</li>
<li>调用方法，作为切入点使用
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759719059.png" alt="image.png"></li>
</ul>
</li>
</ul>
</li>
<li>被代理类有多个代理类，可以设置优先级
<ul>
<li>被代理类使用<code>@Order()</code>注解，传入整数，设置优先级，值越小优先级越高。</li>
<li>设置了的比不设置的高</li>
</ul>
</li>
</ol>
<h4 id="323-完全注解开发"><a class="markdownIt-Anchor" href="#323-完全注解开发"></a> 3.2.3 完全注解开发</h4>
<ol>
<li>创建配置类，替代 xml 配置文件
<ul>
<li>类的名称任意</li>
<li>使用<code>@Configuration</code>声明这是一个配置类</li>
<li>使用<code>@ComponentScan(basePackages = &#123;&quot;iceriver.spring&quot;&#125;)</code>指定扫描的基本路径</li>
<li>使用<code>@EnableAspectJAutoProxy(proxyTargetClass = true)</code>开启 Aspect 生成代理对象</li>
</ul>
</li>
</ol>
<h4 id="324-基于-xml-配置文件进行-aop-操作"><a class="markdownIt-Anchor" href="#324-基于-xml-配置文件进行-aop-操作"></a> 3.2.4 基于 xml 配置文件进行 Aop 操作</h4>
<ol>
<li>创建被增强【被代理】类，在类中定义方法</li>
<li>创建增强【代理】类，编写增强逻辑</li>
<li>在 xml 文件中创建两个类对象
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759732866.png" alt="image.png"></li>
</ul>
</li>
<li>在 xml 文件中配置切入点。
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759734298.png" alt="image.png"></li>
</ul>
</li>
</ol>
<h2 id="4-jdbc-template"><a class="markdownIt-Anchor" href="#4-jdbc-template"></a> 4. Jdbc Template</h2>
<h3 id="41-jdbc-template-介绍"><a class="markdownIt-Anchor" href="#41-jdbc-template-介绍"></a> 4.1 Jdbc Template 介绍</h3>
<ol>
<li>Spring 框架对 Jdbc 进行了封装，简化数据库操作</li>
<li>使用前提是添加了相关的依赖：
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759735835.png" alt="image.png"></li>
</ul>
</li>
<li>xml 中配置 Druid：
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759737041.png" alt="image.png"></li>
</ul>
</li>
<li>创建 Jdbc Temlate 对象并注入数据源信息，完成数据库连接
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759738227.png" alt="image.png"></li>
</ul>
</li>
<li>创建 Service 类、Dao 类，在 Dao 类中注入 Jdbc Template 对象【Bean 的创建对象也依赖注入】，完成持久层持有 Jdbc</li>
</ol>
<h3 id="42-jdbc-template-对象的使用操作数据库"><a class="markdownIt-Anchor" href="#42-jdbc-template-对象的使用操作数据库"></a> 4.2 Jdbc Template 对象的使用——操作数据库</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE `user_db`;</span><br><span class="line">use user_db;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">table</span> `t_book`(</span><br><span class="line">  `user_id` <span class="type">int</span>,</span><br><span class="line">  `username` <span class="type">VARCHAR</span>(<span class="number">100</span>),</span><br><span class="line">	`ustatus` <span class="type">VARCHAR</span>(<span class="number">50</span>));</span><br></pre></td></tr></table></figure>
<h4 id="421-添加功能"><a class="markdownIt-Anchor" href="#421-添加功能"></a> 4.2.1 添加功能</h4>
<ul>
<li><code>update()</code>：
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759744361.png" alt="image.png"></li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(Book book)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into t_book values(?,?,?)&quot;</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">update</span> <span class="operator">=</span> jdbcTemplate.update(sql, book.getUserId(), book.getUserName(), book.getUstatus());</span><br><span class="line">    System.out.println(update);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;iceriver.xml&quot;</span>);</span><br><span class="line">    <span class="type">BookService</span> <span class="variable">bookService</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;bookService&quot;</span>, BookService.class);</span><br><span class="line">    <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Book</span>();</span><br><span class="line">    book.setUserId(<span class="number">1</span>);</span><br><span class="line">    book.setUserName(<span class="string">&quot;java&quot;</span>);</span><br><span class="line">    book.setUstatus(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">    bookService.addBook(book);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="422-修改功能"><a class="markdownIt-Anchor" href="#422-修改功能"></a> 4.2.2 修改功能</h4>
<ul>
<li><code>update()</code>
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759875646.png" alt="image.png"></li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(Book book)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update t_book set username=?,ustatus=? where user_id = ?&quot;</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">update</span> <span class="operator">=</span> jdbcTemplate.update(sql, book.getUserName(), book.getUstatus(),book.getUserId());</span><br><span class="line">    System.out.println(update);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;iceriver.xml&quot;</span>);</span><br><span class="line">    <span class="type">BookService</span> <span class="variable">bookService</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;bookService&quot;</span>, BookService.class);</span><br><span class="line">    <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Book</span>();</span><br><span class="line">    book.setUserId(<span class="number">1</span>);</span><br><span class="line">    book.setUserName(<span class="string">&quot;java&quot;</span>);</span><br><span class="line">    book.setUstatus(<span class="string">&quot;b&quot;</span>);</span><br><span class="line">    bookService.updateBook(book);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="423-删除功能"><a class="markdownIt-Anchor" href="#423-删除功能"></a> 4.2.3 删除功能</h4>
<ul>
<li><code>update()</code>
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759872130.png" alt="image.png"></li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;delete from t_book where user_id=?&quot;</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">update</span> <span class="operator">=</span> jdbcTemplate.update(sql, id);</span><br><span class="line">    System.out.println(update);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">delete</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;iceriver.xml&quot;</span>);</span><br><span class="line">    <span class="type">BookService</span> <span class="variable">bookService</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;bookService&quot;</span>, BookService.class);</span><br><span class="line">    bookService.deleteBook(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="424-查询功能"><a class="markdownIt-Anchor" href="#424-查询功能"></a> 4.2.4 查询功能</h4>
<ol>
<li>查询返回某个值：
<ul>
<li><code>queryForObject(sql, 返回值类型.class)</code></li>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759868134.png" alt="image.png"></li>
</ul>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">findCount</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select count(*) from t_book &quot;</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> jdbcTemplate.queryForObject(sql, Integer.class);</span><br><span class="line">    System.out.println(count);</span><br><span class="line">    <span class="keyword">return</span> count;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">findCount</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;iceriver.xml&quot;</span>);</span><br><span class="line">    <span class="type">BookService</span> <span class="variable">bookService</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;bookService&quot;</span>, BookService.class);</span><br><span class="line">    bookService.findCount();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>查询返回对象：
<ul>
<li><code>queryForObject(sql, new BeanPropertyRowMapper&lt;&gt;(Book.class), id);</code></li>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759864548.png" alt="image.png"></li>
<li>根据 id 查询一条数据</li>
</ul>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Book <span class="title function_">findOne</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from t_book where user_id = ?&quot;</span>;</span><br><span class="line">    <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> jdbcTemplate.queryForObject(sql, <span class="keyword">new</span> <span class="title class_">BeanPropertyRowMapper</span>&lt;&gt;(Book.class), id);</span><br><span class="line">    System.out.println(book);</span><br><span class="line">    <span class="keyword">return</span> book;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">findOne</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;iceriver.xml&quot;</span>);</span><br><span class="line">    <span class="type">BookService</span> <span class="variable">bookService</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;bookService&quot;</span>, BookService.class);</span><br><span class="line">    bookService.findOne(<span class="number">500</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>查询返回对象集合：
<ul>
<li><code>query(sql, new BeanPropertyRowMapper&lt;&gt;(Book.class));</code></li>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759861147.png" alt="image.png"></li>
<li>可以传入第三个参数，也可以没有。</li>
</ul>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;Book&gt; <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from t_book&quot;</span>;</span><br><span class="line">    List&lt;Book&gt; bookList = jdbcTemplate.query(sql, <span class="keyword">new</span> <span class="title class_">BeanPropertyRowMapper</span>&lt;&gt;(Book.class));</span><br><span class="line">    System.out.println(bookList);</span><br><span class="line">    <span class="keyword">return</span> bookList;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;iceriver.xml&quot;</span>);</span><br><span class="line">    <span class="type">BookService</span> <span class="variable">bookService</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;bookService&quot;</span>, BookService.class);</span><br><span class="line">    bookService.findAll();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="43-jdbc-template-批量操作数据库"><a class="markdownIt-Anchor" href="#43-jdbc-template-批量操作数据库"></a> 4.3 Jdbc Template 批量操作数据库</h3>
<p><img src="/2022/07/12/spring5/Spring5/image-1669759857831.png" alt="image.png"></p>
<h4 id="431-批量添加"><a class="markdownIt-Anchor" href="#431-批量添加"></a> 4.3.1 批量添加</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">batchAdd</span><span class="params">(List&lt;Object[]&gt; batchArgs)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into t_book values(?,?,?)&quot;</span>;</span><br><span class="line">    <span class="type">int</span>[] add = jdbcTemplate.batchUpdate(sql, batchArgs);</span><br><span class="line">    System.out.println(Arrays.toString(add));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">batchAdd</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;iceriver.xml&quot;</span>);</span><br><span class="line">    <span class="type">BookService</span> <span class="variable">bookService</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;bookService&quot;</span>, BookService.class);</span><br><span class="line">    List&lt;Object[]&gt; batchArgs = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    Object[] book1 = &#123;<span class="number">3</span>, <span class="string">&quot;java&quot;</span>, <span class="string">&quot;a&quot;</span>&#125;;</span><br><span class="line">    Object[] book2 = &#123;<span class="number">4</span>, <span class="string">&quot;java&quot;</span>, <span class="string">&quot;a&quot;</span>&#125;;</span><br><span class="line">    Object[] book3 = &#123;<span class="number">5</span>, <span class="string">&quot;java&quot;</span>, <span class="string">&quot;a&quot;</span>&#125;;</span><br><span class="line">    batchArgs.add(book1);</span><br><span class="line">    batchArgs.add(book2);</span><br><span class="line">    batchArgs.add(book3);</span><br><span class="line">    bookService.batchAdd(batchArgs);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="432-批量修改"><a class="markdownIt-Anchor" href="#432-批量修改"></a> 4.3.2 批量修改</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">batchUpdate</span><span class="params">(List&lt;Object[]&gt; batchArgs)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update t_book set username=?,ustatus=? where user_id = ?&quot;</span>;</span><br><span class="line">    <span class="type">int</span>[] update = jdbcTemplate.batchUpdate(sql, batchArgs);</span><br><span class="line">    System.out.println(Arrays.toString(update));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">batchUpdate</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;iceriver.xml&quot;</span>);</span><br><span class="line">    <span class="type">BookService</span> <span class="variable">bookService</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;bookService&quot;</span>, BookService.class);</span><br><span class="line">    List&lt;Object[]&gt; batchArgs = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    Object[] book1 = &#123;<span class="string">&quot;前端&quot;</span>, <span class="string">&quot;a&quot;</span>,<span class="number">3</span>&#125;;</span><br><span class="line">    Object[] book2 = &#123;<span class="string">&quot;mysql&quot;</span>, <span class="string">&quot;a&quot;</span>,<span class="number">4</span>&#125;;</span><br><span class="line">    Object[] book3 = &#123;<span class="string">&quot;web&quot;</span>, <span class="string">&quot;a&quot;</span>,<span class="number">5</span>&#125;;</span><br><span class="line">    batchArgs.add(book1);</span><br><span class="line">    batchArgs.add(book2);</span><br><span class="line">    batchArgs.add(book3);</span><br><span class="line">    bookService.batchUpdate(batchArgs);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="433-批量删除"><a class="markdownIt-Anchor" href="#433-批量删除"></a> 4.3.3 批量删除</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">batchDelete</span><span class="params">(List&lt;Object[]&gt; batchArgs)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;delete from t_book where user_id=?&quot;</span>;</span><br><span class="line">    <span class="type">int</span>[] add = jdbcTemplate.batchUpdate(sql, batchArgs);</span><br><span class="line">    System.out.println(Arrays.toString(add));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">batchDelete</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;iceriver.xml&quot;</span>);</span><br><span class="line">    <span class="type">BookService</span> <span class="variable">bookService</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;bookService&quot;</span>, BookService.class);</span><br><span class="line">    List&lt;Object[]&gt; batchArgs = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    Object[] book1 = &#123;<span class="number">3</span>&#125;;</span><br><span class="line">    Object[] book2 = &#123;<span class="number">4</span>&#125;;</span><br><span class="line">    Object[] book3 = &#123;<span class="number">5</span>&#125;;</span><br><span class="line">    batchArgs.add(book1);</span><br><span class="line">    batchArgs.add(book2);</span><br><span class="line">    batchArgs.add(book3);</span><br><span class="line">    bookService.batchDelete(batchArgs);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="44-事务操作"><a class="markdownIt-Anchor" href="#44-事务操作"></a> 4.4 事务操作</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">use user_db;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">table</span> `t_accout`(</span><br><span class="line">  `id` <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">  username <span class="type">VARCHAR</span>(<span class="number">100</span>),</span><br><span class="line">  money <span class="keyword">double</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src="/2022/07/12/spring5/Spring5/image-1669759850992.png" alt="image.png"></p>
<h4 id="441-声明式事务管理"><a class="markdownIt-Anchor" href="#441-声明式事务管理"></a> 4.4.1 声明式事务管理</h4>
<ol>
<li>Spring 中事务管理分为两种方式：编程式、声明式。
<ul>
<li>编程式，即 jdbc 操作过程。</li>
</ul>
</li>
<li>声明式事务管理有两种操作方式：基于注解、xml 文件配置。</li>
<li>声明式事务管理底层 Aop 原理。
<ul>
<li>开启事务：<code>connection.setAutoCommit(false)</code>，对应 AOP 前置通知</li>
<li>提交事务：<code>connection.commit()</code>，对应 AOP 返回通知</li>
<li>回滚事务：<code>connection.rollBack()</code>，对应 AOP 异常通知</li>
<li>释放连接：<code>connection.close()</code>，对应 AOP 后置通知</li>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759847908.png" alt="image.png"></li>
</ul>
</li>
<li>Sping 中进行事务管理的类——事务管理器：
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759846189.png" alt="image.png"></li>
</ul>
</li>
</ol>
<h4 id="442-注解声明式事务管理"><a class="markdownIt-Anchor" href="#442-注解声明式事务管理"></a> 4.4.2 注解声明式事务管理</h4>
<ol>
<li>在 xml 文件中，引入名称空间 tx
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759843812.png" alt="image.png"></li>
</ul>
</li>
<li>在创建事务管理器：
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759841764.png" alt="image.png"></li>
</ul>
</li>
<li>在 xml 文件中开启事务注解驱动
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759839587.png" alt="image.png"></li>
</ul>
</li>
<li>在业务逻辑类【Service 类】添加<code>@Transactional</code>
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759837389.png" alt="image.png"></li>
<li><code>@Transactional</code>可以添加在类上面：表示该类中所有方法都添加事务。</li>
<li><code>@Transactional</code>可以添加到方法上面：表示给该方法添加事务。</li>
</ul>
</li>
</ol>
<h4 id="443-注解声明式事务管理配置参数imagepng"><a class="markdownIt-Anchor" href="#443-注解声明式事务管理配置参数imagepng"></a> 4.4.3 注解声明式事务管理配置参数<img src="/2022/07/12/spring5/Spring5/image-1669759831453.png" alt="image.png"></h4>
<ol>
<li><code>propagation</code>：事务传播行为，
<ul>
<li>事务传播行为是为了解决业务层方法之间互相调用的事务问题。</li>
<li>当事务方法被另一个事务方法调用、或调用其他事务方法时，必须指定事务应该如何传播。——是否开启新事务，新事务如何运行。</li>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759828552.png" alt="image.png"></li>
<li><img src="https://cdn.nlark.com/yuque/0/2022/png/1604140/1658028373615-2843c66b-401f-4acb-a8ae-b87aa481e2ac.png#clientId=u4351ac9e-274f-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;errorMessage=unknown%20error&amp;from=paste&amp;height=45&amp;id=uc91dde5d&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=45&amp;originWidth=415&amp;originalType=binary%E2%88%B6=1&amp;rotation=0&amp;showTitle=false&amp;size=8702&amp;status=error&amp;style=none&amp;taskId=u24d5d31c-8fa7-4876-b913-5f2d834d239&amp;title=&amp;width=415" alt="image.png"></li>
</ul>
</li>
<li><code>isolation</code>：事务隔离级别【默认可重复读】
<ul>
<li>脏读：一个未提交的事务读取到另一个未提交事务的数据</li>
<li>不可重复读：一个未提交事务读取到另一个提交事务修改的数据。</li>
<li>幻读：一个未提交事务读取到拎一个提交事务添加的数据。</li>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759825771.png" alt="image.png"></li>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759824059.png" alt="image.png"></li>
</ul>
</li>
<li><code>timeout</code>：超时时间，规定事务在一定的时间内进行提交，如果未提交就进行回滚，默认为-1，表示不超时。
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759820690.png" alt="image.png"></li>
</ul>
</li>
<li><code>readOnly</code>：是否只读，默认值 false，表示可以进行 CRUD，设置为 true 时，只能进行查询。
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759818405.png" alt="image.png"></li>
</ul>
</li>
<li><code>rollbackFor</code>：回滚，设置出现哪些异常进行回滚
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759815087.png" alt="image.png"></li>
</ul>
</li>
<li><code>noRollbackFor</code>：不回滚，设置出现哪些异常不进行回滚
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759812353.png" alt="image.png"></li>
</ul>
</li>
</ol>
<h4 id="444-xml-声明式事务管理"><a class="markdownIt-Anchor" href="#444-xml-声明式事务管理"></a> 4.4.4 xml 声明式事务管理</h4>
<ol>
<li>配置事务管理器
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759803466.png" alt="image.png"></li>
</ul>
</li>
<li>配置通知
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759801798.png" alt="image.png"></li>
</ul>
</li>
<li>配置切入点和切面
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759799917.png" alt="image.png"></li>
</ul>
</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:tx</span>=<span class="string">&quot;http://www.springframework.org/schema/tx&quot;</span> <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd http://www.springframework.org/schema/aop https://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span></span></span><br><span class="line"><span class="tag">       &gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;iceriver.spring&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span> <span class="attr">destroy-method</span>=<span class="string">&quot;close&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:13306/user_db&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;dimitre123&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--    创建jdbc template对象--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;jdbcTemplate&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    注入dataSource —— 使用setter注入--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--    1. 创建事务管理器--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--        注入数据源--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--    2. 配置通知--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">&quot;txadvice&quot;</span>  <span class="attr">transaction-manager</span>=<span class="string">&quot;transactionManager&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 配置事务参数--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--指定哪种规则上面添加事务--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;accoutMoney&quot;</span>/&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- &lt;tx:method name=&quot;accout*&quot;/&gt;&lt;!–给前缀是accout的所有方法添加–&gt;--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--    3. 配置切入点和切面--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 配置切入点--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;pt&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* iceriver.spring.service.UserService.*(..))&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 配置切面--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;txadvice&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pt&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="45-完全注解开发"><a class="markdownIt-Anchor" href="#45-完全注解开发"></a> 4.5 完全注解开发</h3>
<p><img src="/2022/07/12/spring5/Spring5/image-1669759795446.png" alt="image.png"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> iceriver.spring.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.druid.pool.DruidDataSource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.ComponentScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.jdbc.core.JdbcTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.jdbc.datasource.DataSourceTransactionManager;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.EnableTransactionManagement;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span>: INFINITY https://developer.aliyun.com/profile/sagwrxp2ua66w</span></span><br><span class="line"><span class="comment">* <span class="doctag">@date</span>: 2022/7/17 12:02</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Configuration</span><span class="comment">//1. 声明这是一个配置类</span></span><br><span class="line"><span class="meta">@ComponentScan(basePackages = &quot;iceriver.spring&quot;)</span><span class="comment">//2. 开启组件扫描</span></span><br><span class="line"><span class="meta">@EnableTransactionManagement</span><span class="comment">//3. 声明开启事务</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TxConfig</span> &#123;</span><br><span class="line">    <span class="comment">//    4. 创建数据库连接池</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DruidDataSource <span class="title function_">getDruidDatasource</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">DruidDataSource</span> <span class="variable">dataSource</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">        dataSource.setDriverClassName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">        dataSource.setUrl(<span class="string">&quot;jdbc:mysql://localhost:13306/user_db&quot;</span>);</span><br><span class="line">        dataSource.setUsername(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        dataSource.setPassword(<span class="string">&quot;dimitre123&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> dataSource;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//    4. 创建jadbc Template对象</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> JdbcTemplate <span class="title function_">getJdbcTemplate</span><span class="params">(DataSource dataSource)</span>&#123;</span><br><span class="line">        <span class="type">JdbcTemplate</span> <span class="variable">jdbcTemplate</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JdbcTemplate</span>();</span><br><span class="line">        <span class="comment">//        jdbcTemplate.setDataSource(getDruidDatasource());//注入dataSource，但这种方式会执行两次getDruidDatasource</span></span><br><span class="line">        jdbcTemplate.setDataSource(dataSource);</span><br><span class="line">        <span class="keyword">return</span> jdbcTemplate;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//    6. 创建事务管理器对象</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DataSourceTransactionManager <span class="title function_">getDataSourceTransactionManager</span><span class="params">(DataSource dataSource)</span>&#123;</span><br><span class="line">        <span class="type">DataSourceTransactionManager</span> <span class="variable">transactionManager</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DataSourceTransactionManager</span>();</span><br><span class="line">        transactionManager.setDataSource(dataSource);</span><br><span class="line">        <span class="keyword">return</span> transactionManager;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>@Bean 注解默认是单例的</li>
</ul>
<h2 id="5-spring5-新功能"><a class="markdownIt-Anchor" href="#5-spring5-新功能"></a> 5. Spring5 新功能</h2>
<h3 id="50-新功能介绍"><a class="markdownIt-Anchor" href="#50-新功能介绍"></a> 5.0 新功能介绍</h3>
<ol>
<li>整个 Spring5 框架的代码基于 Java8，运行时兼容 JDK9， 许多不建议使用的类和方法在代码库中删除。</li>
<li>Spring5 框架自带了通用的日志封装，但也可以整合其他日志框架。
<ul>
<li>Spring 框架不支持 Log4j，因为移除了 Log4jConfigListener，官方推荐使用 Log4j2。</li>
</ul>
</li>
</ol>
<h3 id="51-整合-log4j2-日志框架"><a class="markdownIt-Anchor" href="#51-整合-log4j2-日志框架"></a> 5.1 整合 Log4j2 日志框架</h3>
<ol>
<li>引入 jar 包
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759791233.png" alt="image.png"></li>
</ul>
</li>
<li>创建<code>log4j2.xml</code>配置文件——该文件名固定</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="comment">&lt;!--日志级别以及优先级排序: OFF &lt; FATAL &lt; ERROR &lt; WARN &lt; INFO &lt; DEBUG &lt; TRACE &lt; ALL --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--Configuration后面的status用于设置log4j2自身内部的信息输出，可以不设置，当设置成trace时，可以看到log4j2内部各种详细输出--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span> <span class="attr">status</span>=<span class="string">&quot;INFO&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--先定义所有的appender--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appenders</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--输出日志信息到控制台--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">console</span> <span class="attr">name</span>=<span class="string">&quot;Console&quot;</span> <span class="attr">target</span>=<span class="string">&quot;SYSTEM_OUT&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--控制日志输出的格式--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">PatternLayout</span> <span class="attr">pattern</span>=<span class="string">&quot;%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%t] %-5level %logger&#123;36&#125; - %msg%n&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">console</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appenders</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--然后定义logger，只有定义了logger并引入的appender，appender才会生效--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--root：用于指定项目的根日志，如果没有单独指定Logger，则会使用root作为默认的日志输出--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">loggers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">&quot;info&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;Console&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">loggers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>整合日志框架前：
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759786435.png" alt="image.png"></li>
</ul>
</li>
<li>整合日志框架后：
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759783781.png" alt="image.png"></li>
</ul>
</li>
</ul>
<ol start="3">
<li>手动输入日志内容至控制台：
<ul>
<li>创建日志类：
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759780798.png" alt="image.png"></li>
</ul>
</li>
<li>导入<code>import org.slf4j.Logger;</code>和<code>import org.slf4j.LoggerFactory;</code></li>
<li>创建 log 对象：<code>Logger _log _= LoggerFactory._getLogger_(UserLog.class);</code></li>
<li>调用相关的方法：<code>info(str)</code>、<code>warn(str)</code>等</li>
</ul>
</li>
</ol>
<h3 id="52-核心容器支持nullable注解"><a class="markdownIt-Anchor" href="#52-核心容器支持nullable注解"></a> 5.2 核心容器支持<code>@Nullable</code>注解</h3>
<ol>
<li><code>@Nullable</code> 注解可以使用在方法上面，属性上面，参数上面，表示方法返回可以为空，属性值可以为空，参数值可以为空。</li>
</ol>
<h3 id="53-核心容器支持函数式风格genericapplicationcontext"><a class="markdownIt-Anchor" href="#53-核心容器支持函数式风格genericapplicationcontext"></a> 5.3 核心容器支持函数式风格（GenericApplicationContext)</h3>
<ol>
<li>程序员手动创建的对象交给 Spring 管理；</li>
<li>使用方式：
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759777343.png" alt="image.png"></li>
</ul>
</li>
</ol>
<h3 id="54-整合-junit4"><a class="markdownIt-Anchor" href="#54-整合-junit4"></a> 5.4 整合 JUnit4</h3>
<ol>
<li>引入<code>spring-test-5.2.6.RELEASE.jar</code>依赖【当然还有 junit4，以及 hamcrest-core-1.3 对 junit4 进行增强】</li>
<li>使用注解创建测试类：
<ul>
<li>使用注解后，便可通过注入属性的方式创建测试类的对象</li>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759773646.png" alt="image.png"></li>
</ul>
</li>
</ol>
<h3 id="55-整合-junit5"><a class="markdownIt-Anchor" href="#55-整合-junit5"></a> 5.5 整合 JUnit5</h3>
<ol>
<li>引入<code>spring-test-5.2.6.RELEASE.jar</code>依赖【当然还有 junit5】</li>
<li>使用注解创建测试类：
<ul>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759758700.png" alt="image.png"></li>
<li>复合注解方式：</li>
<li><img src="/2022/07/12/spring5/Spring5/image-1669759756265.png" alt="image.png"></li>
</ul>
</li>
</ol>
<h3 id="56-springwebflux"><a class="markdownIt-Anchor" href="#56-springwebflux"></a> 5.6 SpringWebflux</h3>
<blockquote>
<ul>
<li>需要 SpringMVC、SpringBoot、Maven、Java8 新特性知识基础。</li>
</ul>
</blockquote>
<h4 id="561-介绍"><a class="markdownIt-Anchor" href="#561-介绍"></a> 5.6.1 介绍</h4>
<h4 id="562-响应式编程"><a class="markdownIt-Anchor" href="#562-响应式编程"></a> 5.6.2 响应式编程</h4>
<h4 id="563-基于注解编程模型"><a class="markdownIt-Anchor" href="#563-基于注解编程模型"></a> 5.6.3 基于注解编程模型</h4>
<h4 id="564-基于函数式编程模型"><a class="markdownIt-Anchor" href="#564-基于函数式编程模型"></a> 5.6.4 基于函数式编程模型</h4>

        
            <div id="toc-article">
                
  <div class="widget-wrap" id="toc-wrap">
    <h3 class="widget-title"><i class="fa fa-toc"></i> 文章目录</h3>
    <div class="widget">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-spring-%E6%A6%82%E8%BF%B0"><span class="toc-text"> 1. Spring 概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-spring-%E6%A1%86%E6%9E%B6%E4%BB%8B%E7%BB%8D"><span class="toc-text"> 1.1 Spring 框架介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#111-%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-text"> 1.1.1 基本介绍</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#112-%E6%A1%86%E6%9E%B6%E7%BB%93%E6%9E%84%E5%9B%BE"><span class="toc-text"> 1.1.2 框架结构图</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-spring52-%E4%B8%8B%E8%BD%BD"><span class="toc-text"> 1.2 Spring5.2 下载</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#121-%E6%89%8B%E5%8A%A8%E4%B8%8B%E8%BD%BD%E5%BC%95%E5%85%A5-idea"><span class="toc-text"> 1.2.1 手动下载，引入 IDEA</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#122-%E5%9F%BA%E4%BA%8E-maven-%E6%9E%84%E5%BB%BA"><span class="toc-text"> 1.2.2 基于 maven 构建</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-%E4%BD%93%E9%AA%8C-spring-%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1"><span class="toc-text"> 1.3 体验 spring 创建对象</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#131-%E4%BD%BF%E7%94%A8%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%96%B9%E5%BC%8F"><span class="toc-text"> 1.3.1 使用配置文件方式</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-ioc-%E5%8F%8A-ioc-%E6%93%8D%E4%BD%9C"><span class="toc-text"> 2. IoC 及 IoC 操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#21-ioc-%E7%AE%80%E8%BF%B0"><span class="toc-text"> 2.1 IoC 简述</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#211-ioc-%E6%A6%82%E5%BF%B5"><span class="toc-text"> 2.1.1 IoC 概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#222-%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86"><span class="toc-text"> 2.2.2 底层原理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#223-ioc-%E6%8E%A5%E5%8F%A3"><span class="toc-text"> 2.2.3 IoC 接口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#224-bean-%E7%AE%A1%E7%90%86"><span class="toc-text"> 2.2.4 Bean 管理</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#22-%E5%9F%BA%E4%BA%8E-xml-%E6%93%8D%E4%BD%9Cbean-%E7%AE%A1%E7%90%86"><span class="toc-text"> 2.2 基于 xml 操作——Bean 管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#221-%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1"><span class="toc-text"> 2.2.1 创建对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#222-%E6%B3%A8%E5%85%A5%E5%B1%9E%E6%80%A7"><span class="toc-text"> 2.2.2 注入属性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#223-factorybean"><span class="toc-text"> 2.2.3 FactoryBean</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#224-bean-%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-text"> 2.2.4 Bean 作用域</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#225-bean-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%85%B1-7-%E6%AD%A5"><span class="toc-text"> 2.2.5 Bean 生命周期（共 7 步）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#226-xml-%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D"><span class="toc-text"> 2.2.6 xml 自动装配</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#227-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%A3%85%E9%85%8D%E6%95%B0%E6%8D%AE%E6%BA%90"><span class="toc-text"> 2.2.7 配置文件装配数据源</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E6%93%8D%E4%BD%9Cbean-%E7%AE%A1%E7%90%86"><span class="toc-text"> 2.3 基于注解操作——Bean 管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#231-spring-%E4%B8%AD-bean-%E7%AE%A1%E7%90%86%E7%9A%84%E6%B3%A8%E8%A7%A3"><span class="toc-text"> 2.3.1 Spring 中 Bean 管理的注解</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#232-%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1"><span class="toc-text"> 2.3.2 基于注解创建对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#233-%E5%B1%9E%E6%80%A7%E6%B3%A8%E5%85%A5"><span class="toc-text"> 2.3.3 属性注入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#234-%E5%AE%8C%E5%85%A8%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91"><span class="toc-text"> 2.3.4 完全注解开发</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-aop"><span class="toc-text"> 3. Aop</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#31-aop-%E4%BB%8B%E7%BB%8D"><span class="toc-text"> 3.1 Aop 介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#311-aop-%E6%A6%82%E5%BF%B5"><span class="toc-text"> 3.1.1 Aop 概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#312-aop-%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86"><span class="toc-text"> 3.1.2 Aop 底层原理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#313-aop-%E6%9C%AF%E8%AF%AD"><span class="toc-text"> 3.1.3 Aop 术语</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#32-aop-%E6%93%8D%E4%BD%9C"><span class="toc-text"> 3.2 Aop 操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#321-%E6%93%8D%E4%BD%9C%E6%96%B9%E5%BC%8F"><span class="toc-text"> 3.2.1 操作方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#322-%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E8%BF%9B%E8%A1%8C-aop-%E6%93%8D%E4%BD%9Caspectj-%E6%B3%A8%E8%A7%A3"><span class="toc-text"> 3.2.2 基于注解进行 Aop 操作——（AspectJ 注解）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#323-%E5%AE%8C%E5%85%A8%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91"><span class="toc-text"> 3.2.3 完全注解开发</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#324-%E5%9F%BA%E4%BA%8E-xml-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%BF%9B%E8%A1%8C-aop-%E6%93%8D%E4%BD%9C"><span class="toc-text"> 3.2.4 基于 xml 配置文件进行 Aop 操作</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-jdbc-template"><span class="toc-text"> 4. Jdbc Template</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#41-jdbc-template-%E4%BB%8B%E7%BB%8D"><span class="toc-text"> 4.1 Jdbc Template 介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#42-jdbc-template-%E5%AF%B9%E8%B1%A1%E7%9A%84%E4%BD%BF%E7%94%A8%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text"> 4.2 Jdbc Template 对象的使用——操作数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#421-%E6%B7%BB%E5%8A%A0%E5%8A%9F%E8%83%BD"><span class="toc-text"> 4.2.1 添加功能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#422-%E4%BF%AE%E6%94%B9%E5%8A%9F%E8%83%BD"><span class="toc-text"> 4.2.2 修改功能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#423-%E5%88%A0%E9%99%A4%E5%8A%9F%E8%83%BD"><span class="toc-text"> 4.2.3 删除功能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#424-%E6%9F%A5%E8%AF%A2%E5%8A%9F%E8%83%BD"><span class="toc-text"> 4.2.4 查询功能</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#43-jdbc-template-%E6%89%B9%E9%87%8F%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text"> 4.3 Jdbc Template 批量操作数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#431-%E6%89%B9%E9%87%8F%E6%B7%BB%E5%8A%A0"><span class="toc-text"> 4.3.1 批量添加</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#432-%E6%89%B9%E9%87%8F%E4%BF%AE%E6%94%B9"><span class="toc-text"> 4.3.2 批量修改</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#433-%E6%89%B9%E9%87%8F%E5%88%A0%E9%99%A4"><span class="toc-text"> 4.3.3 批量删除</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#44-%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C"><span class="toc-text"> 4.4 事务操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#441-%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86"><span class="toc-text"> 4.4.1 声明式事务管理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#442-%E6%B3%A8%E8%A7%A3%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86"><span class="toc-text"> 4.4.2 注解声明式事务管理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#443-%E6%B3%A8%E8%A7%A3%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%E9%85%8D%E7%BD%AE%E5%8F%82%E6%95%B0imagepng"><span class="toc-text"> 4.4.3 注解声明式事务管理配置参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#444-xml-%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86"><span class="toc-text"> 4.4.4 xml 声明式事务管理</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#45-%E5%AE%8C%E5%85%A8%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91"><span class="toc-text"> 4.5 完全注解开发</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-spring5-%E6%96%B0%E5%8A%9F%E8%83%BD"><span class="toc-text"> 5. Spring5 新功能</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#50-%E6%96%B0%E5%8A%9F%E8%83%BD%E4%BB%8B%E7%BB%8D"><span class="toc-text"> 5.0 新功能介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#51-%E6%95%B4%E5%90%88-log4j2-%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6"><span class="toc-text"> 5.1 整合 Log4j2 日志框架</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#52-%E6%A0%B8%E5%BF%83%E5%AE%B9%E5%99%A8%E6%94%AF%E6%8C%81nullable%E6%B3%A8%E8%A7%A3"><span class="toc-text"> 5.2 核心容器支持@Nullable注解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#53-%E6%A0%B8%E5%BF%83%E5%AE%B9%E5%99%A8%E6%94%AF%E6%8C%81%E5%87%BD%E6%95%B0%E5%BC%8F%E9%A3%8E%E6%A0%BCgenericapplicationcontext"><span class="toc-text"> 5.3 核心容器支持函数式风格（GenericApplicationContext)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#54-%E6%95%B4%E5%90%88-junit4"><span class="toc-text"> 5.4 整合 JUnit4</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#55-%E6%95%B4%E5%90%88-junit5"><span class="toc-text"> 5.5 整合 JUnit5</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#56-springwebflux"><span class="toc-text"> 5.6 SpringWebflux</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#561-%E4%BB%8B%E7%BB%8D"><span class="toc-text"> 5.6.1 介绍</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#562-%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BC%96%E7%A8%8B"><span class="toc-text"> 5.6.2 响应式编程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#563-%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E7%BC%96%E7%A8%8B%E6%A8%A1%E5%9E%8B"><span class="toc-text"> 5.6.3 基于注解编程模型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#564-%E5%9F%BA%E4%BA%8E%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B%E6%A8%A1%E5%9E%8B"><span class="toc-text"> 5.6.4 基于函数式编程模型</span></a></li></ol></li></ol></li></ol>
    </div>
  </div>


            </div>
        
        
          <blockquote id="copyright">
              <p>原文链接: <a href="https://sk370.github.io/2022/07/12/spring5/Spring5/">https://sk370.github.io/2022/07/12/spring5/Spring5/</a></p>
              <p>版权声明: 转载请注明出处。</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring5/" rel="tag">Spring5</a></li></ul>

          
    <div class="social-share">
      <span>分享到:</span>
    </div>



        </div>
      
      
        
<nav id="article-nav">
  
    <a href="/2022/06/29/javaweb/javaweb/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">older</strong>
      <div class="article-nav-title">
        
          Java Web
        
      </div>
    </a>
  
  
    <a href="/2022/07/13/javase/Java%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%EF%BC%88%E4%B8%AD%EF%BC%89/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">newer</strong>
      <div class="article-nav-title">
        
          Java语言基础（中）
        
      </div>
    </a>
  
</nav>

      
      
        








      
    </footer>
  </div>
</article>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-posts"></i> 最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/12/03/blog/hexo/">Hexo + GitHub Pages搭建静态博客</a>
          </li>
        
          <li>
            <a href="/2022/10/29/%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7/%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7/">性能监控</a>
          </li>
        
          <li>
            <a href="/2022/10/29/%E5%8E%8B%E5%8A%9B%E6%B5%8B%E8%AF%95/%E5%8E%8B%E5%8A%9B%E6%B5%8B%E8%AF%95/">压力测试</a>
          </li>
        
          <li>
            <a href="/2022/10/29/springcloud/SpringCloudGateway/">Spring Cloud Gateway</a>
          </li>
        
          <li>
            <a href="/2022/10/29/springcloud/SpringCloudFeign/">Spring Cloud Feign</a>
          </li>
        
      </ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-tag"></i> 标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="/tags/Dubbo/" style="font-size: 10px;">Dubbo</a> <a href="/tags/EhCache/" style="font-size: 10px;">EhCache</a> <a href="/tags/ElasticSearch/" style="font-size: 10px;">ElasticSearch</a> <a href="/tags/JMeter/" style="font-size: 10px;">JMeter</a> <a href="/tags/JSP/" style="font-size: 10px;">JSP</a> <a href="/tags/JUC/" style="font-size: 10px;">JUC</a> <a href="/tags/JVM/" style="font-size: 10px;">JVM</a> <a href="/tags/Java/" style="font-size: 20px;">Java</a> <a href="/tags/Java8/" style="font-size: 10px;">Java8</a> <a href="/tags/JavaWeb/" style="font-size: 10px;">JavaWeb</a> <a href="/tags/Kubernetes/" style="font-size: 10px;">Kubernetes</a> <a href="/tags/Maven/" style="font-size: 10px;">Maven</a> <a href="/tags/MyBatis/" style="font-size: 10px;">MyBatis</a> <a href="/tags/MyBatis-Plus/" style="font-size: 10px;">MyBatis-Plus</a> <a href="/tags/MySQL/" style="font-size: 10px;">MySQL</a> <a href="/tags/Nginx/" style="font-size: 10px;">Nginx</a> <a href="/tags/RabbitMQ/" style="font-size: 10px;">RabbitMQ</a> <a href="/tags/Redis/" style="font-size: 10px;">Redis</a> <a href="/tags/SSM/" style="font-size: 10px;">SSM</a> <a href="/tags/Shiro/" style="font-size: 10px;">Shiro</a> <a href="/tags/Spring-Cloud/" style="font-size: 10px;">Spring Cloud</a> <a href="/tags/Spring-Cloud-Alibaba/" style="font-size: 10px;">Spring Cloud Alibaba</a> <a href="/tags/Spring-Cloud-Feign/" style="font-size: 10px;">Spring Cloud Feign</a> <a href="/tags/Spring-Cloud-Gateway/" style="font-size: 10px;">Spring Cloud Gateway</a> <a href="/tags/Spring-MVC/" style="font-size: 10px;">Spring MVC</a> <a href="/tags/Spring-Security/" style="font-size: 10px;">Spring Security</a> <a href="/tags/Spring-Session/" style="font-size: 10px;">Spring Session</a> <a href="/tags/Spring5/" style="font-size: 10px;">Spring5</a> <a href="/tags/Srping-Boot2/" style="font-size: 10px;">Srping Boot2</a> <a href="/tags/Thymeleaf/" style="font-size: 10px;">Thymeleaf</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/jconsole/" style="font-size: 10px;">jconsole</a> <a href="/tags/jvisualvm/" style="font-size: 10px;">jvisualvm</a> <a href="/tags/zookeeper/" style="font-size: 10px;">zookeeper</a> <a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E6%A1%86%E6%9E%B6/" style="font-size: 10px;">分布式框架</a> <a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E7%90%86%E8%AE%BA/" style="font-size: 10px;">分布式理论</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-classify"></i> 分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Dubbo/">Dubbo</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ElasticSearch/">ElasticSearch</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JVM/">JVM</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaWeb/">JavaWeb</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java%E5%9F%BA%E7%A1%80/">Java基础</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java%E6%96%B0%E7%89%B9%E6%80%A7/">Java新特性</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/MyBatis/">MyBatis</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/MyBatis-Plus/">MyBatis-Plus</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/SSM/">SSM</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Shiro/">Shiro</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring-Cloud/">Spring Cloud</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring-Cloud-Alibaba/">Spring Cloud Alibaba</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring-Framework/">Spring Framework</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring-Security/">Spring Security</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring-Session/">Spring Session</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Srping-Boot/">Srping Boot</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%8E%8B%E5%8A%9B%E6%B5%8B%E8%AF%95/">压力测试</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%A4%9A%E7%BA%BF%E7%A8%8B/">多线程</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/">容器技术</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7/">性能监控</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E7%90%86%E8%AE%BA/">技术理论</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/">搭建博客</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8/">服务器</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/">构建工具</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E/">模板引擎</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/">消息队列</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BC%93%E5%AD%98/">缓存</a><span class="category-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-archive"></i> 归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/">2022年</a><span class="archive-list-count">36</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-tag"></i> 标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/" rel="tag">Docker</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Dubbo/" rel="tag">Dubbo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/EhCache/" rel="tag">EhCache</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ElasticSearch/" rel="tag">ElasticSearch</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JMeter/" rel="tag">JMeter</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSP/" rel="tag">JSP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JUC/" rel="tag">JUC</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JVM/" rel="tag">JVM</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java8/" rel="tag">Java8</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaWeb/" rel="tag">JavaWeb</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kubernetes/" rel="tag">Kubernetes</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Maven/" rel="tag">Maven</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MyBatis/" rel="tag">MyBatis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MyBatis-Plus/" rel="tag">MyBatis-Plus</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nginx/" rel="tag">Nginx</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RabbitMQ/" rel="tag">RabbitMQ</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/" rel="tag">Redis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSM/" rel="tag">SSM</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Shiro/" rel="tag">Shiro</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-Cloud/" rel="tag">Spring Cloud</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-Cloud-Alibaba/" rel="tag">Spring Cloud Alibaba</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-Cloud-Feign/" rel="tag">Spring Cloud Feign</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-Cloud-Gateway/" rel="tag">Spring Cloud Gateway</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-MVC/" rel="tag">Spring MVC</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-Security/" rel="tag">Spring Security</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-Session/" rel="tag">Spring Session</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring5/" rel="tag">Spring5</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Srping-Boot2/" rel="tag">Srping Boot2</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Thymeleaf/" rel="tag">Thymeleaf</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/" rel="tag">hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jconsole/" rel="tag">jconsole</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jvisualvm/" rel="tag">jvisualvm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/zookeeper/" rel="tag">zookeeper</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E6%A1%86%E6%9E%B6/" rel="tag">分布式框架</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E7%90%86%E8%AE%BA/" rel="tag">分布式理论</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>


  
    

  
</aside>
        
      </div>
      <a id="totop" href="#top"></a>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      <p>
        <a href="/sitemap.xml">网站地图</a>
        <span> | </span><a href="/atom.xml">订阅本站</a>
        <span> | </span><a href="/about/">联系博主</a>
      </p>
      
        <p>
          <i class="fa fa-visitors"></i>
          <i id="busuanzi_container_site_uv"><i id="busuanzi_value_site_uv"></i></i>
          ，
          <i class="fa fa-views"></i>
          <i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>
        </p>
      
      <p>
        <span>Copyright &copy; 2022 SK370.</span>
        <span>Theme by <a href="https://github.com/chaooo/hexo-theme-BlueLake/" target="_blank">BlueLake.</a></span>
        <span>Powered by <a href="https://hexo.io/" target="_blank">Hexo.</a></span>
      </p>
    </div>
  </div>
</footer>

    </div>
  </div>
  
<script src="/js/jquery-3.4.1.min.js"></script>


<script src="/js/search.json.js"></script>


  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>






  
<script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  
    
<script src="/localshare/js/social-share.js"></script>

    
<script src="/localshare/js/qrcode.js"></script>

  
  



  

  

  

  

  

  

  

  
  





</body>
</html>