<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Dubbo | SK370 博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  
    <meta name="keywords" content="SK370, JAVA, 博客">
  
  
    <link rel="alternate" href="/atom.xml" title="SK370 博客" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
    
<link rel="stylesheet" href="/localshare/css/share.css">

  
  
  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">SK370 博客</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">SK370的个人博客</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/."><i class="fa fa-home"></i> 首页</a>
        
          <a class="main-nav-link" href="/archives/"><i class="fa fa-archive"></i> 归档</a>
        
          <a class="main-nav-link" href="/about/"><i class="fa fa-user"></i> 关于</a>
        
      </nav>
    </div>
    <div id="search-form">
      <div id="result-mask" class="hide"></div>
      <label><input id="search-key" type="text" autocomplete="off" placeholder="搜索"></label>
      <div id="result-wrap" class="hide">
        <div id="search-result"></div>
      </div>
      <div class="hide">
        <template id="search-tpl">
          <div class="item">
            <a href="/{path}" title="{title}">
              <div class="title">{title}</div>
              <div class="time">{date}</div>
              <div class="tags">{tags}</div>
            </a>
          </div>
        </template>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-dubbo/Dubbo" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      Dubbo
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2022-08-17T23:58:21.000Z" itemprop="datePublished">2022年08月18日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/Dubbo/">Dubbo</a>
  </div>

      
        <span class="article-views">
  <i class="fa fa-views"></i>
  <i id="busuanzi_container_page_pv">
      <i id="busuanzi_value_page_pv"></i>
  </i>
</span>

      
      
<a href="/2022/08/18/dubbo/Dubbo/#comments" class="article-comment-link">
  
    
    
    
    
    
  
  <i class="fa fa-commt"></i>
  留言
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><em>《分布式系统原理与范型》定义：“分布式系统是若干独立计算机的集合，这些计算机对于用户来说就像单个相关系统”。分布式系统（distributed system）是建立在网络之上的软件系统。分布式系统是一个大规模网站的治理系统。</em></p>
<span id="more"></span>
<h2 id="第-1-章-分布式基础"><a class="markdownIt-Anchor" href="#第-1-章-分布式基础"></a> 第 1 章 分布式基础</h2>
<h3 id="11-分布式系统"><a class="markdownIt-Anchor" href="#11-分布式系统"></a> 1.1 分布式系统</h3>
<p>《分布式系统原理与范型》定义：“分布式系统是若干独立计算机的集合，这些计算机对于用户来说就像单个相关系统”。</p>
<p>分布式系统（distributed system）是建立在网络之上的软件系统。</p>
<p>分布式系统是一个大规模网站的治理系统。</p>
<h3 id="12-发展演变"><a class="markdownIt-Anchor" href="#12-发展演变"></a> 1.2 发展演变</h3>
<h4 id="121-单一架构应用"><a class="markdownIt-Anchor" href="#121-单一架构应用"></a> 1.2.1 单一架构应用</h4>
<p><img src="/2022/08/18/dubbo/Dubbo/image.png" alt><br>
网站流量小，一个应用将所有功能都部署在一起，减少部署节点和成本。此时，用于简化增删改查工作量的数据访问框架(ORM)是关键。</p>
<p>缺点：</p>
<ol>
<li>性能扩展比较难</li>
<li>协同开发问题</li>
<li>不利于升级维护</li>
</ol>
<h4 id="122-垂直架构应用"><a class="markdownIt-Anchor" href="#122-垂直架构应用"></a> 1.2.2 垂直架构应用</h4>
<p><img src="/2022/08/18/dubbo/Dubbo/image-1669752644940.png" alt><br>
将应用拆成互不相干的几个应用，以提升效率。此时，用于加速前端页面开发的 Web 框架(MVC)是关键。通过切分业务来实现各个模块独立部署，降低了维护和部署的难度，团队各司其职更易管理，性能扩展也更方便，更有针对性。</p>
<p>缺点：公用模块无法重复利用，开发性的浪费</p>
<h4 id="123-分布式服务架构"><a class="markdownIt-Anchor" href="#123-分布式服务架构"></a> 1.2.3 分布式服务架构</h4>
<p><img src="/2022/08/18/dubbo/Dubbo/image-1669752646964.png" alt><br>
当垂直应用越来越多，应用之间交互不可避免，将核心业务抽取出来，作为独立的服务，逐渐形成稳定的服务中心，使前端应用能更快速的响应多变的市场需求。此时，用于提高业务复用及整合的 <strong>分布式服务框架(RPC)</strong> 是关键。</p>
<h4 id="124-流动计算架构"><a class="markdownIt-Anchor" href="#124-流动计算架构"></a> 1.2.4 流动计算架构</h4>
<p><img src="/2022/08/18/dubbo/Dubbo/image-1669752649030.png" alt><br>
当服务越来越多，容量的评估，小服务资源的浪费等问题逐渐显现，此时需增加一个调度中心基于访问压力实时管理集群容量，提高集群利用率。此时，用于<strong>提高机器利用率的资源调度和治理中心[SOA]( Service Oriented Architecture)是关键</strong>。</p>
<h3 id="13-rpc"><a class="markdownIt-Anchor" href="#13-rpc"></a> 1.3 RPC</h3>
<h4 id="131-rpc-思想"><a class="markdownIt-Anchor" href="#131-rpc-思想"></a> 1.3.1 RPC 思想</h4>
<p>RPC【Remote Procedure Call】是指远程过程调用，是一种进程间通信方式，他是一种技术的思想，而不是规范。</p>
<p>它允许程序调用另一个地址空间（通常是共享网络的另一台机器上）的过程或函数，而不用程序员显式编码这个远程调用的细节。即程序员无论是调用本地的还是远程的函数，本质上编写的调用代码基本相同。</p>
<p>RPC 两个核心模块：通讯，序列化。</p>
<p>RPC 框架有很多：dubbo、gRPC、Thrift、HSF（High Speed Service Framework)</p>
<h4 id="132-基本原理"><a class="markdownIt-Anchor" href="#132-基本原理"></a> 1.3.2 基本原理</h4>
<p><img src="/2022/08/18/dubbo/Dubbo/image-1669752651437.png" alt></p>
<h4 id="133-举例"><a class="markdownIt-Anchor" href="#133-举例"></a> 1.3.3 举例</h4>
<p><img src="/2022/08/18/dubbo/Dubbo/image-1669752653991.png" alt></p>
<h2 id="第-2-章-dubbo"><a class="markdownIt-Anchor" href="#第-2-章-dubbo"></a> 第 2 章 dubbo</h2>
<h3 id="21-dubbo-核心概念"><a class="markdownIt-Anchor" href="#21-dubbo-核心概念"></a> 2.1 dubbo 核心概念</h3>
<h4 id="211-简介"><a class="markdownIt-Anchor" href="#211-简介"></a> 2.1.1 简介</h4>
<p>Apache Dubbo (incubating) |ˈdʌbəʊ| 是一款高性能、轻量级的开源 Java RPC 框架，它提供了三大核心能力：面向接口的远程方法调用，智能容错和负载均衡，以及服务自动注册和发现。</p>
<p>官网：<a target="_blank" rel="noopener" href="https://dubbo.apache.org/zh/index.html">https://dubbo.apache.org/zh/index.html</a></p>
<p>Dubbo 架构具有以下几个<a target="_blank" rel="noopener" href="https://dubbo.apache.org/zh/docsv2.7/user/preface/architecture/">特点</a>，分别是连通性、健壮性、伸缩性、以及向未来架构的升级性。</p>
<h4 id="212-基本概念"><a class="markdownIt-Anchor" href="#212-基本概念"></a> 2.1.2 基本概念</h4>
<p><img src="/2022/08/18/dubbo/Dubbo/image-1669752659550.png" alt></p>
<p>节点角色说明：</p>
<table>
<thead>
<tr>
<th>节点</th>
<th>角色说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Provider</td>
<td>暴露服务的服务提供方</td>
</tr>
<tr>
<td>Consumer</td>
<td>调用远程服务的服务消费方</td>
</tr>
<tr>
<td>Registry</td>
<td>服务注册与发现的注册中心</td>
</tr>
<tr>
<td>Monitor</td>
<td>统计服务的调用次数和调用时间的监控中心</td>
</tr>
<tr>
<td>Container</td>
<td>服务运行容器</td>
</tr>
</tbody>
</table>
<p>调用关系说明：</p>
<ol>
<li>服务容器负责启动，加载，运行服务提供者。</li>
<li>服务提供者在启动时，向注册中心注册自己提供的服务。</li>
<li>服务消费者在启动时，向注册中心订阅自己所需的服务。</li>
<li>注册中心返回服务提供者地址列表给消费者，如果有变更，注册中心将基于长连接推送变更数据给消费者。</li>
<li>服务消费者，从提供者地址列表中，基于软负载均衡算法，选一台提供者进行调用，如果调用失败，再选另一台调用。</li>
<li>服务消费者和提供者，在内存中累计调用次数和调用时间，定时每分钟发送一次统计数据到监控中心。</li>
</ol>
<h3 id="22-dubbo-环境搭建"><a class="markdownIt-Anchor" href="#22-dubbo-环境搭建"></a> 2.2 dubbo 环境搭建</h3>
<h4 id="221-安装-zookeeper-注册中心"><a class="markdownIt-Anchor" href="#221-安装-zookeeper-注册中心"></a> 2.2.1 安装 zookeeper 注册中心</h4>
<p>也可以采用其他注册中心。<br>
<img src="/2022/08/18/dubbo/Dubbo/image-1669752663597.png" alt><br>
解决报错问题：进入 conf 文件夹，复制一份 zoo_sample.cfg，改名为 zoo.cfg<br>
<img src="/2022/08/18/dubbo/Dubbo/image-1669752667735.png" alt><br>
修改 zookeeper 配置文件，本地保存临时文件：新建 data 文件夹，修改配置文件中 dataDir 指向的路径<br>
<img src="/2022/08/18/dubbo/Dubbo/image-1669752665693.png" alt></p>
<p><code>zkServer.cmd</code>：启动注册中心<br>
<code>zkCli.cmd</code>：连接注册中心（作为管理客户端使用）<br>
<code>ls /services</code>：查看有多少服务连接到 zookeeper</p>
<h4 id="222-安装-dubbo-admin-管理控制台"><a class="markdownIt-Anchor" href="#222-安装-dubbo-admin-管理控制台"></a> 2.2.2 安装 dubbo-admin 管理控制台</h4>
<p>dubbo 本身并不是一个服务软件。它其实就是一个 jar 包能够帮你的 java 程序连接到 zookeeper，并利用 zookeeper 消费、提供服务。</p>
<p>但是为了让用户更好的管理监控众多的 dubbo 服务，官方提供了一个可视化的监控程序，不过这个监控即使不装也不影响使用。</p>
<p>进入 dubbo-admin 的 application.properties 文件中，查看 zookeeper 地址是否正确。<br>
<img src="/2022/08/18/dubbo/Dubbo/image-1669752670660.png" alt><br>
在 dubbo-admin 文件下执行 mvn clean package -Dmaven.test.skip=true ，生成 jar 包<br>
<img src="/2022/08/18/dubbo/Dubbo/image-1669752673161.png" alt><br>
为了便于操作：进入 target 目录，拷贝一份打包好的 dubbo-admin-0.0.1-SNAPSHOT.jar 放到喜欢的位置，在命令行终端输入<code>java -jar dubbo-admin-0.0.1-SNAPSHOT.jar</code>，账户名密码均为 root。</p>
<p>注意：启动 dubbo-admin 时，需要启动 zookeeper<br>
<img src="/2022/08/18/dubbo/Dubbo/image-1669752678394.png" alt></p>
<h4 id="223-安装-dubbo-monitor-simple-监控中心"><a class="markdownIt-Anchor" href="#223-安装-dubbo-monitor-simple-监控中心"></a> 2.2.3 安装 dubbo-monitor-simple 监控中心</h4>
<p>主要用来统计服务的调用次数和调用时间，服务消费者和提供者，在内存中累计调用次数和调用时间，定时每分钟发送一次统计数据到监控中心，监控中心则使用数据绘制图表来显示。<br>
<img src="/2022/08/18/dubbo/Dubbo/image-1669752681948.png" alt><br>
打开 target 目录下的 dubbo-monitor-simple-2.0.0-assembly.tar.gz 压缩包，检查注册中心地址<br>
<img src="/2022/08/18/dubbo/Dubbo/image-1669752684403.png" alt><br>
启动监控中心，访问<a target="_blank" rel="noopener" href="http://localhost:8080/">http://localhost:8080/</a><br>
<img src="/2022/08/18/dubbo/Dubbo/image-1669752687736.png" alt></p>
<h3 id="23-使用案例"><a class="markdownIt-Anchor" href="#23-使用案例"></a> 2.3 使用案例</h3>
<h4 id="231-需求描述"><a class="markdownIt-Anchor" href="#231-需求描述"></a> 2.3.1 需求描述</h4>
<p>某个电商系统，订单服务需要调用用户服务获取某个用户的所有地址；</p>
<table>
<thead>
<tr>
<th>模块</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>订单服务 web 模块</td>
<td>创建订单等</td>
</tr>
<tr>
<td>用户服务 service 模块</td>
<td>查询用户地址等</td>
</tr>
</tbody>
</table>
<p>测试预期结果：<br>
订单服务 web 模块在 A 服务器，用户服务模块在 B 服务器，A 可以远程调用 B 的功能。<br>
<img src="/2022/08/18/dubbo/Dubbo/image-1669752690906.png" alt></p>
<h4 id="232-监控中心配置"><a class="markdownIt-Anchor" href="#232-监控中心配置"></a> 2.3.2 监控中心配置</h4>
<p>安装了 dubbo-monitor-simple 监控中心后，要想让服务提供者和消费者能够加入到监控中心，需要进行相关配置。<br>
<img src="/2022/08/18/dubbo/Dubbo/image-1669752693838.png" alt></p>
<h4 id="233-springboot-整合-dubbo"><a class="markdownIt-Anchor" href="#233-springboot-整合-dubbo"></a> 2.3.3 SpringBoot 整合 dubbo</h4>
<p><img src="/2022/08/18/dubbo/Dubbo/image-1669752695378.png" alt><br>
<img src="/2022/08/18/dubbo/Dubbo/image-1669752697478.png" alt><br>
<img src="/2022/08/18/dubbo/Dubbo/image-1669752699488.png" alt></p>
<h2 id="第-3-章-dubbo-配置"><a class="markdownIt-Anchor" href="#第-3-章-dubbo-配置"></a> 第 3 章 Dubbo 配置</h2>
<h3 id="31-配置文件"><a class="markdownIt-Anchor" href="#31-配置文件"></a> 3.1 配置文件</h3>
<h4 id="311-标签配置"><a class="markdownIt-Anchor" href="#311-标签配置"></a> 3.1.1 标签配置</h4>
<p><img src="/2022/08/18/dubbo/Dubbo/image-1669752703895.png" alt><br>
配置官方文档：</p>
<h4 id="312-属性配置"><a class="markdownIt-Anchor" href="#312-属性配置"></a> 3.1.2 属性配置</h4>
<ol>
<li><code>dubbo:consumer</code></li>
</ol>
<p><img src="/2022/08/18/dubbo/Dubbo/image-1669752707378.png" alt></p>
<ol start="2">
<li><code>dubbo:reference</code></li>
</ol>
<p><img src="/2022/08/18/dubbo/Dubbo/image-1669752709447.png" alt></p>
<h4 id="313-属性配置覆盖策略"><a class="markdownIt-Anchor" href="#313-属性配置覆盖策略"></a> 3.1.3 属性配置覆盖策略</h4>
<ul>
<li>方法级优先，接口级次之，全局配置再次之。</li>
<li>如果级别一样，则消费方优先，提供方次之。</li>
</ul>
<p><img src="/2022/08/18/dubbo/Dubbo/image-1669752712138.png" alt></p>
<h4 id="314-超时与重试"><a class="markdownIt-Anchor" href="#314-超时与重试"></a> 3.1.4 超时与重试</h4>
<p>场景模拟：消费服务调用提供者服务超时后，可以通过<code>retries</code>属性指定重试次数，比如设置为 3，则重试机制如下：</p>
<ul>
<li>第 1 次连接默认提供者服务，超时后进行第 2 次连接。</li>
<li>两次连接失败后，更换提供者服务进行第 3 次连接。</li>
<li>三次连接失败后，继续更换提供者服务进行第 4 次连接。</li>
</ul>
<p>幂等（多次操作结果一样，如查询）一般需要设置重试</p>
<p>不幂等（多次操作结果不一样，如插入），一般不设置重试。</p>
<h4 id="315-多版本配置"><a class="markdownIt-Anchor" href="#315-多版本配置"></a> 3.1.5 多版本配置</h4>
<p>场景模拟：提供者服务有多个版本（使用<code>dubbo:service version</code>指定），消费者服务可以通过<code>dubbo:reference version</code>指定与提供者服务相同的版本进行连接。</p>
<p>适合生产环境下服务版本升级。</p>
<h4 id="316-本地服务存根"><a class="markdownIt-Anchor" href="#316-本地服务存根"></a> 3.1.6 （本地）服务存根</h4>
<p>远程服务后，客户端通常只剩下接口，而实现全在服务器端，但提供方有些时候想在客户端也执行部分逻辑。<br>
<img src="/2022/08/18/dubbo/Dubbo/image-1669752714864.png" alt><br>
一般约定 Stub 类配置在接口服务中，xml 设置配置在提供者服务中。具体如下：</p>
<ol>
<li>存根类：设置在接口服务中，创建 Stub 实现。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BarServiceStub</span> <span class="keyword">implements</span> <span class="title class_">BarService</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> BarService barService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 构造函数传入真正的远程代理对象</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BarServiceStub</span><span class="params">(BarService barService)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.barService = barService;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sayHello</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="comment">// 此代码在客户端执行, 你可以在客户端做ThreadLocal本地缓存，或预先验证参数是否合法，等等</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> barService.sayHello(name);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="comment">// 你可以容错，可以做任何AOP拦截事项</span></span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;容错数据&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>xml 配置：<code>&lt;dubbo:consumer interface=&quot;com.foo.BarService&quot; stub=&quot;true&quot;/&gt;</code>或<code>&lt;dubbo:consumer interface=&quot;com.foo.BarService&quot; stub=&quot;com.foo.BarServiceStub&quot;/&gt;</code></li>
</ol>
<h3 id="32-dubboproperties-属性加载顺序"><a class="markdownIt-Anchor" href="#32-dubboproperties-属性加载顺序"></a> 3.2 dubbo:properties 属性加载顺序</h3>
<p>优先级从上到下依次降低：虚拟机参数 →springboot 配置文件参数（xml 和 properties）→ 公共配置（dubbo.properties）<br>
<img src="/2022/08/18/dubbo/Dubbo/image-1669752717698.png" alt></p>
<h3 id="33-springboot-与-dubbo-整合的-3-中方式"><a class="markdownIt-Anchor" href="#33-springboot-与-dubbo-整合的-3-中方式"></a> 3.3 springboot 与 dubbo 整合的 3 中方式</h3>
<h4 id="331-方式一"><a class="markdownIt-Anchor" href="#331-方式一"></a> 3.3.1 方式一</h4>
<ol>
<li>导入 dubbo-start</li>
<li>在 application.properties 文件中配置属性
<ul>
<li>springboot 主程序使用@EanbleDubbo 注解开启 dubbo 注解功能</li>
</ul>
</li>
<li>@Service 注解及参数暴露服务</li>
<li>@Reference 注解及参数引用服务</li>
</ol>
<h4 id="332-方式二"><a class="markdownIt-Anchor" href="#332-方式二"></a> 3.3.2 方式二</h4>
<ol>
<li>导入 dubbo-start</li>
<li>在原始 xml 文件中配置属性
<ul>
<li>xml 文件中暴露服务及引用服务</li>
</ul>
</li>
<li>springboot 主程序使用@ImportResource(locations=“classpath:xxx.xml”)引入配置文件</li>
</ol>
<h4 id="333-方式三"><a class="markdownIt-Anchor" href="#333-方式三"></a> 3.3.3 方式三</h4>
<ol>
<li>导入 dubbo-start</li>
<li>创建 spring 配置类
<ul>
<li>配置类中设置相关的配置属性</li>
</ul>
</li>
<li>springboot 主程序使用@EanbleDubbo 注解或@DubboComponentScan 开启 dubbo 注解功能，同时指定扫描配置类的路径</li>
<li>@Service 注解及参数暴露服务</li>
<li>@Reference 注解及参数引用服务</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyDubboConfig</span> &#123;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Bean</span></span><br><span class="line"> <span class="keyword">public</span> ApplicationConfig <span class="title function_">applicationConfig</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="type">ApplicationConfig</span> <span class="variable">applicationConfig</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ApplicationConfig</span>();</span><br><span class="line">  applicationConfig.setName(<span class="string">&quot;boot-user-service-provider&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> applicationConfig;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">//&lt;dubbo:registry protocol=&quot;zookeeper&quot; address=&quot;127.0.0.1:2181&quot;&gt;&lt;/dubbo:registry&gt;</span></span><br><span class="line"> <span class="meta">@Bean</span></span><br><span class="line"> <span class="keyword">public</span> RegistryConfig <span class="title function_">registryConfig</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="type">RegistryConfig</span> <span class="variable">registryConfig</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RegistryConfig</span>();</span><br><span class="line">  registryConfig.setProtocol(<span class="string">&quot;zookeeper&quot;</span>);</span><br><span class="line">  registryConfig.setAddress(<span class="string">&quot;127.0.0.1:2181&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> registryConfig;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">//&lt;dubbo:protocol name=&quot;dubbo&quot; port=&quot;20882&quot;&gt;&lt;/dubbo:protocol&gt;</span></span><br><span class="line"> <span class="meta">@Bean</span></span><br><span class="line"> <span class="keyword">public</span> ProtocolConfig <span class="title function_">protocolConfig</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="type">ProtocolConfig</span> <span class="variable">protocolConfig</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ProtocolConfig</span>();</span><br><span class="line">  protocolConfig.setName(<span class="string">&quot;dubbo&quot;</span>);</span><br><span class="line">  protocolConfig.setPort(<span class="number">20882</span>);</span><br><span class="line">  <span class="keyword">return</span> protocolConfig;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  *&lt;dubbo:service interface=&quot;com.atguigu.gmall.service.UserService&quot;</span></span><br><span class="line"><span class="comment">  ref=&quot;userServiceImpl01&quot; timeout=&quot;1000&quot; version=&quot;1.0.0&quot;&gt;</span></span><br><span class="line"><span class="comment">  &lt;dubbo:method name=&quot;getUserAddressList&quot; timeout=&quot;1000&quot;&gt;&lt;/dubbo:method&gt;</span></span><br><span class="line"><span class="comment"> &lt;/dubbo:service&gt;</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="meta">@Bean</span></span><br><span class="line"> <span class="keyword">public</span> ServiceConfig&lt;UserService&gt; <span class="title function_">userServiceConfig</span><span class="params">(UserService userService)</span>&#123;</span><br><span class="line">  ServiceConfig&lt;UserService&gt; serviceConfig = <span class="keyword">new</span> <span class="title class_">ServiceConfig</span>&lt;&gt;();</span><br><span class="line">  serviceConfig.setInterface(UserService.class);</span><br><span class="line">  serviceConfig.setRef(userService);</span><br><span class="line">  serviceConfig.setVersion(<span class="string">&quot;1.0.0&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//配置每一个method的信息</span></span><br><span class="line">  <span class="type">MethodConfig</span> <span class="variable">methodConfig</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MethodConfig</span>();</span><br><span class="line">  methodConfig.setName(<span class="string">&quot;getUserAddressList&quot;</span>);</span><br><span class="line">  methodConfig.setTimeout(<span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//将method的设置关联到service配置中</span></span><br><span class="line">  List&lt;MethodConfig&gt; methods = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">  methods.add(methodConfig);</span><br><span class="line">  serviceConfig.setMethods(methods);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//ProviderConfig</span></span><br><span class="line">  <span class="comment">//MonitorConfig</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> serviceConfig;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="第-4-章-高可用场景处理"><a class="markdownIt-Anchor" href="#第-4-章-高可用场景处理"></a> 第 4 章 高可用（场景处理）</h2>
<h3 id="41-zookeeper-宕机与-dubbo-直连"><a class="markdownIt-Anchor" href="#41-zookeeper-宕机与-dubbo-直连"></a> 4.1 zookeeper 宕机与 dubbo 直连</h3>
<p>现象：zookeeper 注册中心宕机，还可以消费 dubbo 暴露的服务。</p>
<p>原因：健壮性</p>
<ul>
<li>监控中心宕掉不影响使用，只是丢失部分采样数据</li>
<li>数据库宕掉后，注册中心仍能通过缓存提供服务列表查询，但不能注册新服务</li>
<li>注册中心对等集群，任意一台宕掉后，将自动切换到另一台</li>
<li><strong>注册中心全部宕掉后，服务提供者和服务消费者仍能通过本地缓存通讯</strong></li>
<li>服务提供者无状态，任意一台宕掉后，不影响使用</li>
<li>服务提供者全部宕掉后，服务消费者应用将无法使用，并无限次重连等待服务提供者恢复</li>
</ul>
<p>高可用：通过设计，减少系统不能提供服务的时间。</p>
<p>dubbo 直连：<code>@Reference(url=&quot;ip&quot;)</code></p>
<h3 id="42-集群下-dubbo-负载均衡配置"><a class="markdownIt-Anchor" href="#42-集群下-dubbo-负载均衡配置"></a> 4.2 集群下 dubbo 负载均衡配置</h3>
<p>在集群负载均衡时，Dubbo 提供了多种均衡策略，缺省为 random 随机调用。</p>
<p><img src="/2022/08/18/dubbo/Dubbo/image-1669752724036.png" alt></p>
<h4 id="421-random-loadbalance-策略"><a class="markdownIt-Anchor" href="#421-random-loadbalance-策略"></a> 4.2.1 <strong>Random LoadBalance 策略</strong></h4>
<p>随机，按权重设置随机概率。</p>
<p>在一个截面上碰撞的概率高，但调用量越大分布越均匀，而且按概率使用权重后也比较均匀，有利于动态调整提供者权重。<br>
<img src="/2022/08/18/dubbo/Dubbo/image-1669752726125.png" alt></p>
<h4 id="422-roundrobin-loadbalance"><a class="markdownIt-Anchor" href="#422-roundrobin-loadbalance"></a> 4.2.2 <strong>RoundRobin LoadBalance</strong></h4>
<p>轮循，按公约后的权重设置轮循比率。</p>
<p>存在慢的提供者累积请求的问题，比如：第二台机器很慢，但没挂，当请求调到第二台时就卡在那，久而久之，所有请求都卡在调到第二台上。<br>
<img src="/2022/08/18/dubbo/Dubbo/image-1669752728383.png" alt></p>
<h4 id="423-leastactive-loadbalance"><a class="markdownIt-Anchor" href="#423-leastactive-loadbalance"></a> 4.2.3 <strong>LeastActive LoadBalance</strong></h4>
<p>最少活跃调用数，相同活跃数的随机，活跃数指调用前后计数差。</p>
<p>使慢的提供者收到更少请求，因为越慢的提供者的调用前后计数差会越大。<br>
<img src="/2022/08/18/dubbo/Dubbo/image-1669752730782.png" alt></p>
<h4 id="424-consistenthash-loadbalance"><a class="markdownIt-Anchor" href="#424-consistenthash-loadbalance"></a> 4.2.4 ConsistentHash LoadBalance</h4>
<p>一致性 Hash，相同参数的请求总是发到同一提供者。</p>
<p>当某一台提供者挂时，原本发往该提供者的请求，基于虚拟节点，平摊到其它提供者，不会引起剧烈变动。</p>
<p>算法参见：<a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/Consistent_hashing">http://en.wikipedia.org/wiki/Consistent_hashing</a></p>
<p>缺省只对第一个参数 Hash，如果要修改，请配置 <code>&lt;dubbo:parameter key=&quot;hash.arguments&quot; value=&quot;0,1&quot; /&gt;</code></p>
<p>缺省用 160 份虚拟节点，如果要修改，请配置<code>&lt;dubbo:parameter key=&quot;hash.nodes&quot; value=&quot;320&quot; /&gt;</code><br>
<img src="/2022/08/18/dubbo/Dubbo/image-1669752733168.png" alt></p>
<h3 id="43-服务降级"><a class="markdownIt-Anchor" href="#43-服务降级"></a> 4.3 服务降级</h3>
<p>当服务器压力剧增的情况下，根据实际业务情况及流量，对一些服务和页面有策略的不处理或换种简单的方式处理，从而释放服务器资源以保证核心交易正常运作或高效运作。</p>
<p>可以通过服务降级功能临时屏蔽某个出错的非关键服务，并定义降级后的返回策略。<br>
dubbo 支持两种降级策略：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RegistryFactory</span> <span class="variable">registryFactory</span> <span class="operator">=</span> ExtensionLoader.getExtensionLoader(RegistryFactory.class).getAdaptiveExtension();</span><br><span class="line"><span class="type">Registry</span> <span class="variable">registry</span> <span class="operator">=</span> registryFactory.getRegistry(URL.valueOf(<span class="string">&quot;zookeeper://10.20.153.10:2181&quot;</span>));</span><br><span class="line">registry.register(URL.valueOf(<span class="string">&quot;override://0.0.0.0/com.foo.BarService?category=configurators&amp;dynamic=false&amp;application=foo&amp;mock=force:return+null&quot;</span>));</span><br></pre></td></tr></table></figure>
<ol>
<li>mock=force:return+null 表示消费方对该服务的方法调用都直接返回 null 值，不发起远程调用。用来屏蔽不重要服务不可用时对调用方的影响。
<ul>
<li>或在 dubbo-admin 管理控制台将消费者进行屏蔽</li>
<li><img src="/2022/08/18/dubbo/Dubbo/image-1669752737454.png" alt></li>
</ul>
</li>
<li>还可以改为 mock=fail:return+null 表示消费方对该服务的方法调用在失败后，再返回 null 值，不抛异常。用来容忍不重要服务不稳定时对调用方的影响。
<ul>
<li>或在 dubbo-admin 管理控制台将消费者进行容错设置</li>
<li><img src="/2022/08/18/dubbo/Dubbo/image-1669752740168.png" alt></li>
</ul>
</li>
</ol>
<h3 id="44-集群容错"><a class="markdownIt-Anchor" href="#44-集群容错"></a> 4.4 集群容错</h3>
<h4 id="441-集群容错概念"><a class="markdownIt-Anchor" href="#441-集群容错概念"></a> 4.4.1 集群容错概念</h4>
<p><img src="/2022/08/18/dubbo/Dubbo/image-1669752742778.png" alt>各节点关系：</p>
<ul>
<li>这里的 <code>Invoker</code>是 <code>Provider</code>的一个可调用 <code>Service</code>的抽象，<code>Invoker</code>封装了 <code>Provider</code>地址及 Service 接口信息</li>
<li><code>Directory</code>代表多个 <code>Invoker</code>，可以把它看成<code>List&lt;Invoker&gt;</code> ，但与 <code>List</code>不同的是，它的值可能是动态变化的，比如注册中心推送变更</li>
<li><code>Cluster</code>将 <code>Directory</code>中的多个 <code>Invoker</code>伪装成一个 <code>Invoker</code>，对上层透明，伪装过程包含了容错逻辑，调用失败后，重试另一个</li>
<li><code>Router</code>负责从多个 <code>Invoker</code>中按路由规则选出子集，比如读写分离，应用隔离等</li>
<li><code>LoadBalance</code>负责从多个 <code>Invoker</code>中选出具体的一个用于本次调用，选的过程包含了负载均衡算法，调用失败后，需要重选。</li>
</ul>
<h4 id="442-集群容错模式"><a class="markdownIt-Anchor" href="#442-集群容错模式"></a> 4.4.2 集群容错模式</h4>
<p>在集群调用失败时，Dubbo 提供了多种容错方案，缺省为 failover 重试。</p>
<ol>
<li>Failover Cluster</li>
</ol>
<p>失败自动切换，当出现失败，重试其它服务器。通常用于读操作，但重试会带来更长延迟。可通过 retries=“2” 来设置重试次数(不含第一次)。</p>
<p>重试次数配置如下：<code>&lt;dubbo:service retries=&quot;2&quot; /&gt;</code>或<code>&lt;dubbo:reference retries=&quot;2&quot; /&gt;</code>或<img src="/2022/08/18/dubbo/Dubbo/image-1669752745786.png" alt></p>
<ol start="2">
<li>Failfast Cluster</li>
</ol>
<p>快速失败，只发起一次调用，失败立即报错。通常用于非幂等性的写操作，比如新增记录。</p>
<ol start="3">
<li>Failsafe Cluster</li>
</ol>
<p>失败安全，出现异常时，直接忽略。通常用于写入审计日志等操作。</p>
<ol start="4">
<li>Failback Cluster</li>
</ol>
<p>失败自动恢复，后台记录失败请求，定时重发。通常用于消息通知操作。</p>
<ol start="5">
<li>Forking Cluster</li>
</ol>
<p>并行调用多个服务器，只要一个成功即返回。通常用于实时性要求较高的读操作，但需要浪费更多服务资源。可通过 forks=“2” 来设置最大并行数。</p>
<ol start="6">
<li>Broadcast Cluster</li>
</ol>
<p>广播调用所有提供者，逐个调用，任意一台报错则报错 [2]。通常用于通知所有提供者更新缓存或日志等本地资源信息。</p>
<h4 id="443-集群模式配置"><a class="markdownIt-Anchor" href="#443-集群模式配置"></a> 4.4.3 集群模式配置</h4>
<p>按照以下示例在服务提供方和消费方配置集群模式<code>&lt;dubbo:service cluster=&quot;failsafe&quot; /&gt;</code>或<code>&lt;dubbo:reference cluster=&quot;failsafe&quot; /&gt;</code></p>
<h4 id="444-整合-hystrix-容错"><a class="markdownIt-Anchor" href="#444-整合-hystrix-容错"></a> 4.4.4 整合 hystrix 容错</h4>
<p>Hystrix 旨在通过控制那些访问远程系统、服务和第三方库的节点，从而对延迟和故障提供更强大的容错能力。</p>
<p>Hystrix 具备拥有回退机制和断路器功能的线程和信号隔离，请求缓存和请求打包，以及监控和配置等功能。</p>
<ol>
<li>提供者和消费者：导入依赖：spring-cloud-starter-netflix-hystrix</li>
</ol>
<p><code>alt+/</code>可以在 eclipse 中快速导入：<br>
<img src="/2022/08/18/dubbo/Dubbo/image-1669752752985.png" alt></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-cloud-starter-netflix-hystrix&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;<span class="number">1.4</span><span class="number">.4</span>.RELEASE&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>提供者和消费者：配置 spring-cloud-starter-netflix-hystrix</li>
</ol>
<p>然后在 Application 类上增加@EnableHystrix 来启用 hystrix starter：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableHystrix</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProviderApplication</span> &#123;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>配置 Provider 端：在 Dubbo 的 Provider 上增加@HystrixCommand 配置，这样子调用就会经过 Hystrix 代理</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service(version = &quot;1.0.0&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">HelloService</span> &#123;</span><br><span class="line">    <span class="meta">@HystrixCommand(commandProperties = &#123;</span></span><br><span class="line"><span class="meta">    @HystrixProperty(name = &quot;circuitBreaker.requestVolumeThreshold&quot;, value = &quot;10&quot;),</span></span><br><span class="line"><span class="meta">    @HystrixProperty(name = &quot;execution.isolation.thread.timeoutInMilliseconds&quot;, value = &quot;2000&quot;) &#125;)</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sayHello</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="comment">// System.out.println(&quot;async provider received: &quot; + name);</span></span><br><span class="line">        <span class="comment">// return &quot;annotation: hello, &quot; + name;</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;Exception to show hystrix enabled.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>配置 Consumer 端：对于 Consumer 端，则可以增加一层 method 调用，并在 method 上配置@HystrixCommand。当调用出错时，会走到 fallbackMethod = &quot;reliable&quot;的调用里。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Reference(version = &quot;1.0.0&quot;)</span></span><br><span class="line"><span class="keyword">private</span> HelloService demoService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@HystrixCommand(fallbackMethod = &quot;reliable&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">doSayHello</span><span class="params">(String name)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> demoService.sayHello(name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">reliable</span><span class="params">(String name)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;hystrix fallback value&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="第-5-章-dubbo-原理"><a class="markdownIt-Anchor" href="#第-5-章-dubbo-原理"></a> 第 5 章 dubbo 原理</h2>
<h3 id="51-rpc-原理"><a class="markdownIt-Anchor" href="#51-rpc-原理"></a> 5.1 RPC 原理</h3>
<p><img src="/2022/08/18/dubbo/Dubbo/image-1669752756989.png" alt><br>
一次完整的 RPC 调用流程（同步调用，异步另说）如下：</p>
<ol>
<li><strong>服务消费方（client）调用以本地调用方式调用服务；</strong></li>
<li>client stub 接收到调用后负责将方法、参数等组装成能够进行网络传输的消息体；</li>
<li>client stub 找到服务地址，并将消息发送到服务端；</li>
<li>server stub 收到消息后进行解码；</li>
<li>server stub 根据解码结果调用本地的服务；</li>
<li>本地服务执行并将结果返回给 server stub；</li>
<li>server stub 将返回结果打包成消息并发送至消费方；</li>
<li>client stub 接收到消息，并进行解码；</li>
<li><strong>服务消费方得到最终结果。</strong></li>
</ol>
<p>RPC 框架的目标就是要 2~8 这些步骤都封装起来，这些细节对用户来说是透明的，不可见的。实际操作 dubbo 是第 1 步和第 9 步。</p>
<h3 id="52-netty-通信原理"><a class="markdownIt-Anchor" href="#52-netty-通信原理"></a> 5.2 netty 通信原理</h3>
<p>Netty 是一个异步事件驱动的网络应用程序框架，用于快速开发可维护的高性能协议服务器和客户端。它极大地简化并简化了 TCP 和 UDP 套接字服务器等网络编程。</p>
<p><strong>BIO(Blocking IO)：服务器接到一个请求即开启一个线程，不能处理大量请求。</strong><br>
<img src="/2022/08/18/dubbo/Dubbo/image-1669752764117.png" alt></p>
<p><strong>NIO (Non-Blocking IO)：<strong>Selector 一般称为</strong>选择器</strong>，也可以翻译为<strong>多路复用器</strong>，Connect（连接就绪）、Accept（接受就绪）、Read（读就绪）、Write（写就绪）。Selector 监听多个通道，事件就绪后才开启线程。<br>
<img src="/2022/08/18/dubbo/Dubbo/image-1669752765829.png" alt><br>
<strong>Netty 基本原理：</strong><br>
<img src="/2022/08/18/dubbo/Dubbo/image-1669752768498.png" alt></p>
<h3 id="53-dubbo-原理"><a class="markdownIt-Anchor" href="#53-dubbo-原理"></a> 5.3 Dubbo 原理</h3>
<h4 id="531-dubbo-框架设计"><a class="markdownIt-Anchor" href="#531-dubbo-框架设计"></a> 5.3.1 dubbo 框架设计</h4>
<p><img src="/2022/08/18/dubbo/Dubbo/image-1669752771106.png" alt><br>
图例说明：</p>
<ul>
<li>图中左边淡蓝背景的为服务消费方使用的接口，右边淡绿色背景的为服务提供方使用的接口，位于中轴线上的为双方都用到的接口。</li>
<li>图中从下至上分为十层，各层均为单向依赖，右边的黑色箭头代表层之间的依赖关系，每一层都可以剥离上层被复用，其中，Service 和 Config 层为 API，其它各层均为 SPI。</li>
<li>图中绿色小块的为扩展接口，蓝色小块为实现类，图中只显示用于关联各层的实现类。</li>
<li>图中蓝色虚线为初始化过程，即启动时组装链，红色实线为方法调用过程，即运行时调时链，紫色三角箭头为继承，可以把子类看作父类的同一个节点，线上的文字为调用的方法。</li>
</ul>
<p>各层说明：</p>
<ul>
<li><strong>config 配置层</strong>：对外配置接口，以 ServiceConfig, ReferenceConfig 为中心，可以直接初始化配置类，也可以通过 spring 解析配置生成配置类</li>
<li><strong>proxy 服务代理层</strong>：服务接口透明代理，生成服务的客户端 Stub 和服务器端 Skeleton, 以 ServiceProxy 为中心，扩展接口为 ProxyFactory</li>
<li><strong>registry 注册中心层</strong>：封装服务地址的注册与发现，以服务 URL 为中心，扩展接口为 RegistryFactory, Registry, RegistryService</li>
<li><strong>cluster 路由层</strong>：封装多个提供者的路由及负载均衡，并桥接注册中心，以 Invoker 为中心，扩展接口为 Cluster, Directory, Router, LoadBalance</li>
<li><strong>monitor 监控层</strong>：RPC 调用次数和调用时间监控，以 Statistics 为中心，扩展接口为 MonitorFactory, Monitor, MonitorService</li>
<li><strong>protocol 远程调用层</strong>：封装 RPC 调用，以 Invocation, Result 为中心，扩展接口为 Protocol, Invoker, Exporter</li>
<li><strong>exchange 信息交换层</strong>：封装请求响应模式，同步转异步，以 Request, Response 为中心，扩展接口为 Exchanger, ExchangeChannel, ExchangeClient, ExchangeServer</li>
<li><strong>transport 网络传输层</strong>：抽象 mina 和 netty 为统一接口，以 Message 为中心，扩展接口为 Channel, Transporter, Client, Server, Codec</li>
<li><strong>serialize 数据序列化层</strong>：可复用的一些工具，扩展接口为 Serialization, ObjectInput, ObjectOutput, ThreadPool</li>
</ul>
<h4 id="532-启动解析-加载配置信息流程"><a class="markdownIt-Anchor" href="#532-启动解析-加载配置信息流程"></a> 5.3.2 启动解析、加载配置信息流程</h4>
<p>dubbo 的 xml 配置文件相当于是 spring 的一个配置类，因此可以找到 spring 中的标签解析器 BeanDefinitionParser 的实现子类DubboBeanDefinitionParser 查看如何解析 dubbo 的配置文件。</p>
<p>在 DubboBeanDefinitionParser 类中 parse()方法具体实现标签、属性、值的解析。</p>
<p>parse()方法中每个标签都有一个对应的 bean.class，在 DubboBeanDefinitionParser 构造器方法中对 bean.class 进行了初始化，在调用过程中，执行了 DubboNamespaceHandler 类中的 init()方法，对各个标签进行创建：<br>
<img src="/2022/08/18/dubbo/Dubbo/image-1669752775224.png" alt><br>
其中，除 service 和 reference 标签，其他标签创建的是配置类，这两个创建的是 bean。总体执行流程如下：<br>
<img src="/2022/08/18/dubbo/Dubbo/image-1669752776808.png" alt></p>
<h4 id="533-服务暴露过程"><a class="markdownIt-Anchor" href="#533-服务暴露过程"></a> 5.3.3 服务暴露过程</h4>
<p>即 servicebean 的创建过程：<br>
<img src="/2022/08/18/dubbo/Dubbo/image-1669752778726.png" alt></p>
<h4 id="534-服务引用流程"><a class="markdownIt-Anchor" href="#534-服务引用流程"></a> 5.3.4 服务引用流程</h4>
<p>即 referencebean 的创建过程：<br>
<img src="/2022/08/18/dubbo/Dubbo/image-1669752785374.png" alt></p>
<h4 id="535-服务调用流程"><a class="markdownIt-Anchor" href="#535-服务调用流程"></a> 5.3.5 服务调用流程</h4>
<p><img src="/2022/08/18/dubbo/Dubbo/image-1669752788316.png" alt></p>
<h2 id="总结"><a class="markdownIt-Anchor" href="#总结"></a> 总结</h2>
<p>dubbo 主要解决了 rpc（远程过程调用问题），不能解决分布式的所有问题，在 springcloud 中，集成了各种分布式问题的解决方案。</p>
<p>dubbo 的分布式原理与其他分布式框架底层思想一致、方式也基本一致（万变不离其宗）。</p>
<p>本文介绍了 dubbo 的主要使用特性/配置/功能，不常见的没有介绍。</p>

        
            <div id="toc-article">
                
  <div class="widget-wrap" id="toc-wrap">
    <h3 class="widget-title"><i class="fa fa-toc"></i> 文章目录</h3>
    <div class="widget">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC-1-%E7%AB%A0-%E5%88%86%E5%B8%83%E5%BC%8F%E5%9F%BA%E7%A1%80"><span class="toc-text"> 第 1 章 分布式基础</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F"><span class="toc-text"> 1.1 分布式系统</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-%E5%8F%91%E5%B1%95%E6%BC%94%E5%8F%98"><span class="toc-text"> 1.2 发展演变</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#121-%E5%8D%95%E4%B8%80%E6%9E%B6%E6%9E%84%E5%BA%94%E7%94%A8"><span class="toc-text"> 1.2.1 单一架构应用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#122-%E5%9E%82%E7%9B%B4%E6%9E%B6%E6%9E%84%E5%BA%94%E7%94%A8"><span class="toc-text"> 1.2.2 垂直架构应用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#123-%E5%88%86%E5%B8%83%E5%BC%8F%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84"><span class="toc-text"> 1.2.3 分布式服务架构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#124-%E6%B5%81%E5%8A%A8%E8%AE%A1%E7%AE%97%E6%9E%B6%E6%9E%84"><span class="toc-text"> 1.2.4 流动计算架构</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-rpc"><span class="toc-text"> 1.3 RPC</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#131-rpc-%E6%80%9D%E6%83%B3"><span class="toc-text"> 1.3.1 RPC 思想</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#132-%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86"><span class="toc-text"> 1.3.2 基本原理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#133-%E4%B8%BE%E4%BE%8B"><span class="toc-text"> 1.3.3 举例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC-2-%E7%AB%A0-dubbo"><span class="toc-text"> 第 2 章 dubbo</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#21-dubbo-%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5"><span class="toc-text"> 2.1 dubbo 核心概念</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#211-%E7%AE%80%E4%BB%8B"><span class="toc-text"> 2.1.1 简介</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#212-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-text"> 2.1.2 基本概念</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#22-dubbo-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="toc-text"> 2.2 dubbo 环境搭建</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#221-%E5%AE%89%E8%A3%85-zookeeper-%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83"><span class="toc-text"> 2.2.1 安装 zookeeper 注册中心</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#222-%E5%AE%89%E8%A3%85-dubbo-admin-%E7%AE%A1%E7%90%86%E6%8E%A7%E5%88%B6%E5%8F%B0"><span class="toc-text"> 2.2.2 安装 dubbo-admin 管理控制台</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#223-%E5%AE%89%E8%A3%85-dubbo-monitor-simple-%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83"><span class="toc-text"> 2.2.3 安装 dubbo-monitor-simple 监控中心</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-%E4%BD%BF%E7%94%A8%E6%A1%88%E4%BE%8B"><span class="toc-text"> 2.3 使用案例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#231-%E9%9C%80%E6%B1%82%E6%8F%8F%E8%BF%B0"><span class="toc-text"> 2.3.1 需求描述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#232-%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83%E9%85%8D%E7%BD%AE"><span class="toc-text"> 2.3.2 监控中心配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#233-springboot-%E6%95%B4%E5%90%88-dubbo"><span class="toc-text"> 2.3.3 SpringBoot 整合 dubbo</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC-3-%E7%AB%A0-dubbo-%E9%85%8D%E7%BD%AE"><span class="toc-text"> 第 3 章 Dubbo 配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#31-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text"> 3.1 配置文件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#311-%E6%A0%87%E7%AD%BE%E9%85%8D%E7%BD%AE"><span class="toc-text"> 3.1.1 标签配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#312-%E5%B1%9E%E6%80%A7%E9%85%8D%E7%BD%AE"><span class="toc-text"> 3.1.2 属性配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#313-%E5%B1%9E%E6%80%A7%E9%85%8D%E7%BD%AE%E8%A6%86%E7%9B%96%E7%AD%96%E7%95%A5"><span class="toc-text"> 3.1.3 属性配置覆盖策略</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#314-%E8%B6%85%E6%97%B6%E4%B8%8E%E9%87%8D%E8%AF%95"><span class="toc-text"> 3.1.4 超时与重试</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#315-%E5%A4%9A%E7%89%88%E6%9C%AC%E9%85%8D%E7%BD%AE"><span class="toc-text"> 3.1.5 多版本配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#316-%E6%9C%AC%E5%9C%B0%E6%9C%8D%E5%8A%A1%E5%AD%98%E6%A0%B9"><span class="toc-text"> 3.1.6 （本地）服务存根</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#32-dubboproperties-%E5%B1%9E%E6%80%A7%E5%8A%A0%E8%BD%BD%E9%A1%BA%E5%BA%8F"><span class="toc-text"> 3.2 dubbo:properties 属性加载顺序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#33-springboot-%E4%B8%8E-dubbo-%E6%95%B4%E5%90%88%E7%9A%84-3-%E4%B8%AD%E6%96%B9%E5%BC%8F"><span class="toc-text"> 3.3 springboot 与 dubbo 整合的 3 中方式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#331-%E6%96%B9%E5%BC%8F%E4%B8%80"><span class="toc-text"> 3.3.1 方式一</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#332-%E6%96%B9%E5%BC%8F%E4%BA%8C"><span class="toc-text"> 3.3.2 方式二</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#333-%E6%96%B9%E5%BC%8F%E4%B8%89"><span class="toc-text"> 3.3.3 方式三</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC-4-%E7%AB%A0-%E9%AB%98%E5%8F%AF%E7%94%A8%E5%9C%BA%E6%99%AF%E5%A4%84%E7%90%86"><span class="toc-text"> 第 4 章 高可用（场景处理）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#41-zookeeper-%E5%AE%95%E6%9C%BA%E4%B8%8E-dubbo-%E7%9B%B4%E8%BF%9E"><span class="toc-text"> 4.1 zookeeper 宕机与 dubbo 直连</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#42-%E9%9B%86%E7%BE%A4%E4%B8%8B-dubbo-%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E9%85%8D%E7%BD%AE"><span class="toc-text"> 4.2 集群下 dubbo 负载均衡配置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#421-random-loadbalance-%E7%AD%96%E7%95%A5"><span class="toc-text"> 4.2.1 Random LoadBalance 策略</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#422-roundrobin-loadbalance"><span class="toc-text"> 4.2.2 RoundRobin LoadBalance</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#423-leastactive-loadbalance"><span class="toc-text"> 4.2.3 LeastActive LoadBalance</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#424-consistenthash-loadbalance"><span class="toc-text"> 4.2.4 ConsistentHash LoadBalance</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#43-%E6%9C%8D%E5%8A%A1%E9%99%8D%E7%BA%A7"><span class="toc-text"> 4.3 服务降级</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#44-%E9%9B%86%E7%BE%A4%E5%AE%B9%E9%94%99"><span class="toc-text"> 4.4 集群容错</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#441-%E9%9B%86%E7%BE%A4%E5%AE%B9%E9%94%99%E6%A6%82%E5%BF%B5"><span class="toc-text"> 4.4.1 集群容错概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#442-%E9%9B%86%E7%BE%A4%E5%AE%B9%E9%94%99%E6%A8%A1%E5%BC%8F"><span class="toc-text"> 4.4.2 集群容错模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#443-%E9%9B%86%E7%BE%A4%E6%A8%A1%E5%BC%8F%E9%85%8D%E7%BD%AE"><span class="toc-text"> 4.4.3 集群模式配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#444-%E6%95%B4%E5%90%88-hystrix-%E5%AE%B9%E9%94%99"><span class="toc-text"> 4.4.4 整合 hystrix 容错</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC-5-%E7%AB%A0-dubbo-%E5%8E%9F%E7%90%86"><span class="toc-text"> 第 5 章 dubbo 原理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#51-rpc-%E5%8E%9F%E7%90%86"><span class="toc-text"> 5.1 RPC 原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#52-netty-%E9%80%9A%E4%BF%A1%E5%8E%9F%E7%90%86"><span class="toc-text"> 5.2 netty 通信原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#53-dubbo-%E5%8E%9F%E7%90%86"><span class="toc-text"> 5.3 Dubbo 原理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#531-dubbo-%E6%A1%86%E6%9E%B6%E8%AE%BE%E8%AE%A1"><span class="toc-text"> 5.3.1 dubbo 框架设计</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#532-%E5%90%AF%E5%8A%A8%E8%A7%A3%E6%9E%90-%E5%8A%A0%E8%BD%BD%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF%E6%B5%81%E7%A8%8B"><span class="toc-text"> 5.3.2 启动解析、加载配置信息流程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#533-%E6%9C%8D%E5%8A%A1%E6%9A%B4%E9%9C%B2%E8%BF%87%E7%A8%8B"><span class="toc-text"> 5.3.3 服务暴露过程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#534-%E6%9C%8D%E5%8A%A1%E5%BC%95%E7%94%A8%E6%B5%81%E7%A8%8B"><span class="toc-text"> 5.3.4 服务引用流程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#535-%E6%9C%8D%E5%8A%A1%E8%B0%83%E7%94%A8%E6%B5%81%E7%A8%8B"><span class="toc-text"> 5.3.5 服务调用流程</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-text"> 总结</span></a></li></ol>
    </div>
  </div>


            </div>
        
        
          <blockquote id="copyright">
              <p>原文链接: <a href="https://sk370.github.io/2022/08/18/dubbo/Dubbo/">https://sk370.github.io/2022/08/18/dubbo/Dubbo/</a></p>
              <p>版权声明: 转载请注明出处。</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Dubbo/" rel="tag">Dubbo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E6%A1%86%E6%9E%B6/" rel="tag">分布式框架</a></li></ul>

          
    <div class="social-share">
      <span>分享到:</span>
    </div>



        </div>
      
      
        
<nav id="article-nav">
  
    <a href="/2022/08/16/redis/Redis/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">older</strong>
      <div class="article-nav-title">
        
          Redis
        
      </div>
    </a>
  
  
    <a href="/2022/08/20/docker/docker/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">newer</strong>
      <div class="article-nav-title">
        
          Docker
        
      </div>
    </a>
  
</nav>

      
      
        








      
    </footer>
  </div>
</article>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-posts"></i> 最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/12/03/blog/hexo/">Hexo + GitHub Pages搭建静态博客</a>
          </li>
        
          <li>
            <a href="/2022/10/29/%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7/%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7/">性能监控</a>
          </li>
        
          <li>
            <a href="/2022/10/29/%E5%8E%8B%E5%8A%9B%E6%B5%8B%E8%AF%95/%E5%8E%8B%E5%8A%9B%E6%B5%8B%E8%AF%95/">压力测试</a>
          </li>
        
          <li>
            <a href="/2022/10/29/springcloud/SpringCloudGateway/">Spring Cloud Gateway</a>
          </li>
        
          <li>
            <a href="/2022/10/29/springcloud/SpringCloudFeign/">Spring Cloud Feign</a>
          </li>
        
      </ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-tag"></i> 标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="/tags/Dubbo/" style="font-size: 10px;">Dubbo</a> <a href="/tags/EhCache/" style="font-size: 10px;">EhCache</a> <a href="/tags/ElasticSearch/" style="font-size: 10px;">ElasticSearch</a> <a href="/tags/JMeter/" style="font-size: 10px;">JMeter</a> <a href="/tags/JSP/" style="font-size: 10px;">JSP</a> <a href="/tags/JUC/" style="font-size: 10px;">JUC</a> <a href="/tags/JVM/" style="font-size: 10px;">JVM</a> <a href="/tags/Java/" style="font-size: 20px;">Java</a> <a href="/tags/Java8/" style="font-size: 10px;">Java8</a> <a href="/tags/JavaWeb/" style="font-size: 10px;">JavaWeb</a> <a href="/tags/Kubernetes/" style="font-size: 10px;">Kubernetes</a> <a href="/tags/Maven/" style="font-size: 10px;">Maven</a> <a href="/tags/MyBatis/" style="font-size: 10px;">MyBatis</a> <a href="/tags/MyBatis-Plus/" style="font-size: 10px;">MyBatis-Plus</a> <a href="/tags/MySQL/" style="font-size: 10px;">MySQL</a> <a href="/tags/Nginx/" style="font-size: 10px;">Nginx</a> <a href="/tags/RabbitMQ/" style="font-size: 10px;">RabbitMQ</a> <a href="/tags/Redis/" style="font-size: 10px;">Redis</a> <a href="/tags/SSM/" style="font-size: 10px;">SSM</a> <a href="/tags/Shiro/" style="font-size: 10px;">Shiro</a> <a href="/tags/Spring-Cloud/" style="font-size: 10px;">Spring Cloud</a> <a href="/tags/Spring-Cloud-Alibaba/" style="font-size: 10px;">Spring Cloud Alibaba</a> <a href="/tags/Spring-Cloud-Feign/" style="font-size: 10px;">Spring Cloud Feign</a> <a href="/tags/Spring-Cloud-Gateway/" style="font-size: 10px;">Spring Cloud Gateway</a> <a href="/tags/Spring-MVC/" style="font-size: 10px;">Spring MVC</a> <a href="/tags/Spring-Security/" style="font-size: 10px;">Spring Security</a> <a href="/tags/Spring-Session/" style="font-size: 10px;">Spring Session</a> <a href="/tags/Spring5/" style="font-size: 10px;">Spring5</a> <a href="/tags/Srping-Boot2/" style="font-size: 10px;">Srping Boot2</a> <a href="/tags/Thymeleaf/" style="font-size: 10px;">Thymeleaf</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/jconsole/" style="font-size: 10px;">jconsole</a> <a href="/tags/jvisualvm/" style="font-size: 10px;">jvisualvm</a> <a href="/tags/zookeeper/" style="font-size: 10px;">zookeeper</a> <a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E6%A1%86%E6%9E%B6/" style="font-size: 10px;">分布式框架</a> <a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E7%90%86%E8%AE%BA/" style="font-size: 10px;">分布式理论</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-classify"></i> 分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Dubbo/">Dubbo</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ElasticSearch/">ElasticSearch</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JVM/">JVM</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaWeb/">JavaWeb</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java%E5%9F%BA%E7%A1%80/">Java基础</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java%E6%96%B0%E7%89%B9%E6%80%A7/">Java新特性</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/MyBatis/">MyBatis</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/MyBatis-Plus/">MyBatis-Plus</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/SSM/">SSM</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Shiro/">Shiro</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring-Cloud/">Spring Cloud</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring-Cloud-Alibaba/">Spring Cloud Alibaba</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring-Framework/">Spring Framework</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring-Security/">Spring Security</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring-Session/">Spring Session</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Srping-Boot/">Srping Boot</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%8E%8B%E5%8A%9B%E6%B5%8B%E8%AF%95/">压力测试</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%A4%9A%E7%BA%BF%E7%A8%8B/">多线程</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/">容器技术</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7/">性能监控</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E7%90%86%E8%AE%BA/">技术理论</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/">搭建博客</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8/">服务器</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/">构建工具</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E/">模板引擎</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/">消息队列</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BC%93%E5%AD%98/">缓存</a><span class="category-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-archive"></i> 归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/">2022年</a><span class="archive-list-count">36</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-tag"></i> 标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/" rel="tag">Docker</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Dubbo/" rel="tag">Dubbo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/EhCache/" rel="tag">EhCache</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ElasticSearch/" rel="tag">ElasticSearch</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JMeter/" rel="tag">JMeter</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSP/" rel="tag">JSP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JUC/" rel="tag">JUC</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JVM/" rel="tag">JVM</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java8/" rel="tag">Java8</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaWeb/" rel="tag">JavaWeb</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kubernetes/" rel="tag">Kubernetes</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Maven/" rel="tag">Maven</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MyBatis/" rel="tag">MyBatis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MyBatis-Plus/" rel="tag">MyBatis-Plus</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nginx/" rel="tag">Nginx</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RabbitMQ/" rel="tag">RabbitMQ</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/" rel="tag">Redis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSM/" rel="tag">SSM</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Shiro/" rel="tag">Shiro</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-Cloud/" rel="tag">Spring Cloud</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-Cloud-Alibaba/" rel="tag">Spring Cloud Alibaba</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-Cloud-Feign/" rel="tag">Spring Cloud Feign</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-Cloud-Gateway/" rel="tag">Spring Cloud Gateway</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-MVC/" rel="tag">Spring MVC</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-Security/" rel="tag">Spring Security</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-Session/" rel="tag">Spring Session</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring5/" rel="tag">Spring5</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Srping-Boot2/" rel="tag">Srping Boot2</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Thymeleaf/" rel="tag">Thymeleaf</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/" rel="tag">hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jconsole/" rel="tag">jconsole</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jvisualvm/" rel="tag">jvisualvm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/zookeeper/" rel="tag">zookeeper</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E6%A1%86%E6%9E%B6/" rel="tag">分布式框架</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E7%90%86%E8%AE%BA/" rel="tag">分布式理论</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>


  
    

  
</aside>
        
      </div>
      <a id="totop" href="#top"></a>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      <p>
        <a href="/sitemap.xml">网站地图</a>
        <span> | </span><a href="/atom.xml">订阅本站</a>
        <span> | </span><a href="/about/">联系博主</a>
      </p>
      
        <p>
          <i class="fa fa-visitors"></i>
          <i id="busuanzi_container_site_uv"><i id="busuanzi_value_site_uv"></i></i>
          ，
          <i class="fa fa-views"></i>
          <i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>
        </p>
      
      <p>
        <span>Copyright &copy; 2022 SK370.</span>
        <span>Theme by <a href="https://github.com/chaooo/hexo-theme-BlueLake/" target="_blank">BlueLake.</a></span>
        <span>Powered by <a href="https://hexo.io/" target="_blank">Hexo.</a></span>
      </p>
    </div>
  </div>
</footer>

    </div>
  </div>
  
<script src="/js/jquery-3.4.1.min.js"></script>


<script src="/js/search.json.js"></script>


  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>






  
<script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  
    
<script src="/localshare/js/social-share.js"></script>

    
<script src="/localshare/js/qrcode.js"></script>

  
  



  

  

  

  

  

  

  

  
  





</body>
</html>